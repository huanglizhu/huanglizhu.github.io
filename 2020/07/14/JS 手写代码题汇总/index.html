<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>JS 手写代码题汇总 | 珠</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="前端,程序员,软件开发,面试,CSS,JavaScript,JS,ES6,HTML,Node.js,React,Vue" />
  
  
  
  
  <meta name="description" content="记录一些最近看到&#x2F;以前遇到的手写代码题 参考文章">
<meta property="og:type" content="article">
<meta property="og:title" content="JS 手写代码题汇总">
<meta property="og:url" content="http://yoursite.com/2020/07/14/JS%20%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E9%A2%98%E6%B1%87%E6%80%BB/index.html">
<meta property="og:site_name" content="珠">
<meta property="og:description" content="记录一些最近看到&#x2F;以前遇到的手写代码题 参考文章">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/10/9/166579def5f81853?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/huanglizhu/huanglizhu.github.io/images/imgLazyLoad.png">
<meta property="article:published_time" content="2020-07-14T02:19:31.000Z">
<meta property="article:modified_time" content="2024-08-08T07:32:08.300Z">
<meta property="article:author" content="黄丽珠">
<meta property="article:tag" content="JS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-gold-cdn.xitu.io/2018/10/9/166579def5f81853?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
  
    <link rel="alternate" href="/atom.xml" title="珠" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/sx.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >
  <link rel="stylesheet" href="/css/fashion.css" >
  <link rel="stylesheet" href="/css/glyphs.css" >

<meta name="generator" content="Hexo 6.3.0"></head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  


        <header id="allheader" class="site-header" role="banner"  >
                <div class="clearfix container">
                    <div class="site-branding">

                        <h1 class="site-title">
                            
                                    <a href="/" title="珠" rel="home">
                                        珠
                                    </a>
                                    
                        </h1>

                        
                            <div class="site-description">
                                Record every bit of front-end learning.
                            </div>
                            

                                <nav id="main-navigation" class="main-navigation" role="navigation">
                                    <a class="nav-open">Menu</a>
                                    <a class="nav-close">Close</a>

                                    <div class="clearfix sf-menu">
                                        <ul id="main-nav" class="menu sf-js-enabled sf-arrows" style="touch-action: pan-y;">
                                            
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/">
                                                        主页
                                                    </a>
                                                </li>
                                                
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/archives">
                                                        归档
                                                    </a>
                                                </li>
                                                
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/categories">
                                                        分类
                                                    </a>
                                                </li>
                                                
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/tags">
                                                        标签
                                                    </a>
                                                </li>
                                                
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/about">
                                                        关于
                                                    </a>
                                                </li>
                                                
                                        </ul>
                                    </div>
                                </nav>

                    </div>
                </div>
        </header>

  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-JS 手写代码题汇总" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      JS 手写代码题汇总
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2020/07/14/JS%20%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E9%A2%98%E6%B1%87%E6%80%BB/" class="article-date">
	  <time datetime="2020-07-14T02:19:31.000Z" itemprop="datePublished">七月 14, 2020</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/JavaScript%E5%AD%A6%E4%B9%A0/">JavaScript学习</a>, <a class="article-category-link" href="/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/">面试题</a>
 
      
	<span id="busuanzi_container_page_pv">
	  本文总阅读量<span id="busuanzi_value_page_pv"></span>次
	</span>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>记录一些最近看到&#x2F;以前遇到的手写代码题</li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000038910420">参考文章</a></li>
</ul>
<span id="more"></span>

<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><h2 id="数组去0（2种方法）"><a href="#数组去0（2种方法）" class="headerlink" title="数组去0（2种方法）"></a>数组去0（2种方法）</h2><ul>
<li><strong>要求：</strong>将数组中的0去掉，给0计数，返回新数组。</li>
<li><strong>方法1：es6 <a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2019/08/11/JS%E5%AF%B9%E8%B1%A1%E4%B9%8B%E6%95%B0%E7%BB%84%EF%BC%882%EF%BC%89/#Array-prototype-filter-%E6%95%B0%E7%BB%84%E8%BF%87%E6%BB%A4%E6%96%B9%E6%B3%95">array.filter()数组过滤方法</a></strong><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handleArr</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  let newArr = arr.<span class="built_in">filter</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> key !== <span class="number">0</span>);</span><br><span class="line">  let <span class="built_in">sum</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (key of arr) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">sum</span>++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123; newArr, <span class="built_in">sum</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.<span class="built_in">log</span>(handleArr(arr).newArr, handleArr(arr).<span class="built_in">sum</span>); <span class="comment">// [1, 13, 45, 5, 16, 6, 25, 4, 17, 6, 7, 15] 4 </span></span><br></pre></td></tr></table></figure></li>
<li><strong>方法2：for循环</strong><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 题目</span></span><br><span class="line">let arr = [<span class="number">1</span>, <span class="number">13</span>, <span class="number">45</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">16</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">25</span>, <span class="number">4</span>, <span class="number">17</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">0</span>, <span class="number">15</span>];</span><br><span class="line"><span class="comment">// 答案</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleArr</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  let newArr = [],</span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (key of arr) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">sum</span>++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      newArr.<span class="built_in">push</span>(key);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;newArr, <span class="built_in">sum</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.<span class="built_in">log</span>(handleArr(arr).newArr,handleArr(arr).<span class="built_in">sum</span>); <span class="comment">// [1, 13, 45, 5, 16, 6, 25, 4, 17, 6, 7, 15] 4</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h2><p>可参考<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/04/18/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%EF%BC%882%EF%BC%89/#%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D%EF%BC%885%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%89">“前端面试题目（2）”</a></p>
<h3 id="ES6-Set"><a href="#ES6-Set" class="headerlink" title="ES6 Set"></a>ES6 Set</h3><ul>
<li><strong>注意：<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/04/09/ES6%20Map%E5%92%8CSet/#Set-%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D">Set对象</a>不是数组，需要转换为数组（有2种方法转换）</strong><ul>
<li>方法1：扩展运算符</li>
<li>方法2：<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2019/12/07/%E7%B1%BB%E6%95%B0%E7%BB%84/#%E9%80%9A%E8%BF%87Array-from"><code>Array.from()</code></a>把set结构转换为数组</li>
</ul>
</li>
<li><strong>代码：</strong><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="comment">// ES6 Set</span></span><br><span class="line">  <span class="keyword">let</span> newSet = <span class="keyword">new</span> <span class="title class_">Set</span>(arr);</span><br><span class="line">  <span class="comment">// Set对象不是数组，需要转换为数组。</span></span><br><span class="line">  <span class="comment">// 方法1：扩展运算符；方法2：Array.from()把set结构转换为数组</span></span><br><span class="line">  <span class="comment">// return [...newSet];</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">from</span>(newSet);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr));</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="不创建新数组"><a href="#不创建新数组" class="headerlink" title="不创建新数组"></a>不创建新数组</h4><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 方法1：注意<span class="keyword">Set</span>对象不是数组，需要转换为数组</span><br><span class="line">arr=[...new <span class="keyword">Set</span>(arr)];</span><br><span class="line"></span><br><span class="line">// 方法2：</span><br><span class="line">function <span class="keyword">unique</span>(<span class="keyword">array</span>) &#123;</span><br><span class="line">  //<span class="keyword">Array</span>.<span class="keyword">from</span>()能把<span class="keyword">set</span>结构转换为数组</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">Array</span>.<span class="keyword">from</span>(new <span class="keyword">Set</span>(<span class="keyword">array</span>));       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>原地操作数组，删除重复元素</strong>，可参考<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/04/09/ES6%20Map%E5%92%8CSet/#%E6%95%B0%E7%BB%84%E7%9B%B8%E5%85%B3%E7%9A%84%E9%9D%A2%E8%AF%95%E9%A2%98">“ES6 Map和Set”</a><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">let arr = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="comment">// 原地操作数组，删除重复元素</span></span><br><span class="line">  let len = <span class="number">0</span>; <span class="comment">// len为不重复数的index，结果数组长度len</span></span><br><span class="line">  <span class="comment">// 遍历原数组</span></span><br><span class="line">  <span class="keyword">for</span> (let i = len; i &lt; arr.<span class="built_in">length</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// 原数组中第一次找到的数组项放入数组前方，len长度+1</span></span><br><span class="line">    <span class="keyword">if</span> (arr.<span class="built_in">indexOf</span>(arr[i]) === i) &#123;</span><br><span class="line">      arr[len] = arr[i];</span><br><span class="line">      len++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 相同的i+1继续查</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 去重后，删除数组后方多余数据项</span></span><br><span class="line">  arr.<span class="built_in">splice</span>(len);</span><br><span class="line">  <span class="comment">// 原地修改，不需要返回</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 针对 原地修改，不返回数组 的打印</span></span><br><span class="line">unique(arr);</span><br><span class="line"><span class="built_in">console</span>.<span class="built_in">log</span>(arr);<span class="comment">//  [1, 2, 3, 4, 5, 11, 22, 33]</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="JS-三种方法"><a href="#JS-三种方法" class="headerlink" title="JS 三种方法"></a>JS 三种方法</h3><ul>
<li><p><strong>方法1：</strong>最简单数组去重法（<strong>遍历结果数组</strong>，没有的就加进结果数组中）</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> arr = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>];</span><br><span class="line">function <span class="built_in">unique</span>(arr) &#123;</span><br><span class="line">  // 遍历结果数组</span><br><span class="line">  <span class="built_in">let</span> newArr = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">key</span> of arr) &#123;</span><br><span class="line">    // 新数组中无则放入新数组</span><br><span class="line">    <span class="keyword">if</span> (newArr.indexOf(<span class="built_in">key</span>) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      newArr.<span class="built_in">push</span>(<span class="built_in">key</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> newArr;</span><br><span class="line">&#125;</span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">unique</span>(arr));</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>方法2：</strong>速度最快， 占空间最多（空间换时间），参考<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/04/18/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%EF%BC%882%EF%BC%89/#%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D%EF%BC%885%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%89">“前端面试题目（2）”</a></p>
</li>
<li><p><strong>方法3：</strong>数组下标判断法（<strong>遍历原数组</strong>，符合的就加进结果数组中）</p>
<ul>
<li><strong>注意</strong>：indexOf遇到多个时<strong>返回第一个的位置</strong><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">let arr = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="comment">// 遍历原数组</span></span><br><span class="line">  let newArr = [];</span><br><span class="line">  <span class="keyword">for</span> (let i = <span class="number">0</span>; i &lt; arr.<span class="built_in">length</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// 在原数组中是indexOf时第一个的则放入结果数组</span></span><br><span class="line">    <span class="keyword">if</span> (arr.<span class="built_in">indexOf</span>(arr[i]) === i) &#123;</span><br><span class="line">      newArr.<span class="built_in">push</span>(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newArr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.<span class="built_in">log</span>(unique(arr));</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<hr>
<h2 id="数组排序"><a href="#数组排序" class="headerlink" title="数组排序"></a>数组排序</h2><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 题目：将data中的数据按照age 从小到大排序</span></span><br><span class="line"><span class="keyword">var</span> data = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;Jay&#x27;</span>, <span class="attr">age</span>: <span class="number">10</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;Jerry&#x27;</span>, <span class="attr">age</span>: <span class="number">15</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;Merry&#x27;</span>, <span class="attr">age</span>: <span class="number">12</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;Tom&#x27;</span>, <span class="attr">age</span>: <span class="number">14</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;Richard&#x27;</span>, <span class="attr">age</span>: <span class="number">22</span> &#125;</span><br><span class="line">];</span><br><span class="line"><span class="comment">// 答案【sort，小升大降】</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">compare</span>(<span class="params">prop</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">obj1, obj2</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> value1 = obj1[prop];</span><br><span class="line">        <span class="keyword">var</span> value2 = obj2[prop];</span><br><span class="line">        <span class="keyword">return</span> value1 - value2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">data.<span class="built_in">sort</span>(compare(<span class="string">&#x27;age&#x27;</span>));</span><br><span class="line"><span class="comment">// 极简写法</span></span><br><span class="line">data.<span class="built_in">sort</span>(<span class="function">(<span class="params">a,b</span>)=&gt;</span>(a.age-b.age))</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="数组扁平化（2种方法）"><a href="#数组扁平化（2种方法）" class="headerlink" title="数组扁平化（2种方法）"></a>数组扁平化（2种方法）</h2><ul>
<li>数组扁平化就是<strong>把多维数组转化成一维数组</strong></li>
<li><strong>方法1：</strong> es6提供的新方法 <strong><code>arr.flat(depth)</code></strong> 可将多维数组转换为参数指定的嵌套层数。<strong>depth深度级别，可以理解为拆解的层级，默认值为1，即拆一层</strong>，<strong>参数为 Infinity 则无论多少层都（拆掉）转为一维数组</strong><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 题目</span></span><br><span class="line"><span class="keyword">var</span> <span class="keyword">data</span> = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]], <span class="number">9</span>, <span class="number">10</span>];</span><br><span class="line"><span class="comment">// 答案</span></span><br><span class="line"><span class="keyword">data</span>.flat(Infinity); <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br><span class="line"><span class="comment">// 注意：arr.flat(1)结果是[1, 2, 3, 4, 5, Array(3), 9, 10]</span></span><br><span class="line"><span class="comment">// arr.flat(2)结果是[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure></li>
<li><strong>方法2：for…of遍历数组+cancat&#x2F;扩展运算符</strong> （注意：扩展运算符只能将一维数组展开，<code>array.push(item1, item2, ..., itemX)</code>，push()里可传多值）<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 题目</span><br><span class="line"><span class="built_in">var</span> data = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]], <span class="number">9</span>, <span class="number">10</span>];</span><br><span class="line">// 答案</span><br><span class="line">function <span class="built_in">flatten</span>(arr) &#123;</span><br><span class="line">  <span class="built_in">var</span> res = [];</span><br><span class="line">  <span class="keyword">for</span>(<span class="built_in">key</span> of arr)&#123;</span><br><span class="line">    // 判断数组元素是数组时，递归调用，合并</span><br><span class="line">    <span class="keyword">if</span> (Array.isArray(<span class="built_in">key</span>)) &#123;</span><br><span class="line">      res = res.<span class="built_in">concat</span>(<span class="built_in">flatten</span>(<span class="built_in">key</span>)); //<span class="built_in">concat</span> 并不会改变原数组</span><br><span class="line">      //res.<span class="built_in">push</span>(...<span class="built_in">flatten</span>(<span class="built_in">key</span>)); //或者用扩展运算符 </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      // 判断数组元素不是数组时，直接放入结果数组</span><br><span class="line">      res.<span class="built_in">push</span>(<span class="built_in">key</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">flatten</span>(data));  // [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="手写数组的map"><a href="#手写数组的map" class="headerlink" title="手写数组的map()"></a>手写数组的map()</h2><ul>
<li><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/jsref-map.html">array.map(function(currentValue,index,arr), thisValue)</a></strong><ul>
<li><strong>arr</strong>可选。map方法调用的<strong>数组</strong>。</li>
<li><strong>thisValue</strong>可选。<strong>执行callback函数时被用作this的值</strong>。如果省略了 thisValue，或者传入 null、undefined，那么回调函数的 this 为全局对象。<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用法：</span></span><br><span class="line">const a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">const b = array1.<span class="built_in">map</span>(<span class="function"><span class="params">x</span> =&gt;</span> x * <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.<span class="built_in">log</span>(b);   <span class="comment">// Array [2, 4, 6, 8]</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>数组的map() 方法会<strong>返回一个新的数组</strong>，这个<strong>新数组中的每个元素</strong>对应<strong>原数组中的对应位置元素调用</strong>一次<strong>提供的函数后的返回值</strong>。</li>
<li>map方法有<strong>两个参数</strong>，一个是操作数组元素的<strong>方法fn</strong>，一个是<strong>this指向(可选)<strong>，其中</strong>使用fn时可以获取三个参数</strong>，实现时记得不要漏掉</li>
<li><strong>注意</strong>： map() <strong>不会对空数组进行检测</strong><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myMap</span> = <span class="keyword">function</span> (<span class="params">fn, thisValue</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> res = []</span><br><span class="line">  <span class="comment">// thisValue：执行callback函数时被用作this的值</span></span><br><span class="line">  thisValue = thisValue || <span class="variable language_">window</span> <span class="comment">// 省略 thisValue，或传入 null、undefined，则回调函数的 this 为全局对象</span></span><br><span class="line">  <span class="keyword">let</span> arr = <span class="variable language_">this</span> <span class="comment">// 得到需要遍历的数组arr</span></span><br><span class="line">  <span class="comment">// 将每个数组元素调用回调函数的结果加入到结果数组中</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// 参数分别为 this指向，当前数组项，当前索引，当前数组</span></span><br><span class="line">    res.<span class="title function_">push</span>(fn.<span class="title function_">call</span>(thisValue, arr[i], i, arr))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 array.myMap(function(currentValue,index,arr), thisValue)</span></span><br><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> b = a.<span class="title function_">myMap</span>(<span class="function">(<span class="params">a, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`索引<span class="subst">$&#123;index&#125;</span>的值为`</span>, a + <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">return</span> a + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b)   <span class="comment">// Array 2，3，4</span></span><br></pre></td></tr></table></figure></li>
<li><strong>实现步骤：</strong><ol>
<li>定义结果数组res，最后返回它</li>
<li>解决参数2<code>thisValue</code>空值情况</li>
<li>通过this得到需要遍历的数组arr</li>
<li>遍历数组arr，将每个数组元素调用回调函数（参数1<code>fn</code>）的结果加入到结果数组中。</li>
<li>通过call()让arr中每个数组元素都调用参数1<code>fn</code>，其中this指向为参数2<code>thisValue</code>，需要传入的参数是：当前数组元素，当前索引，当前数组</li>
</ol>
</li>
</ul>
<hr>
<h2 id="手写forEach"><a href="#手写forEach" class="headerlink" title="手写forEach()"></a>手写forEach()</h2><ul>
<li><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/jsref-foreach.html">array.forEach(function(currentValue, index, arr), thisValue)</a></strong><ul>
<li><strong>thisValue</strong>	可选。<strong>执行callback函数时被用作this的值</strong>。<br>如果这个<strong>参数为空， “undefined”</strong> 会传递给 “this” 值</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myForEach</span> = <span class="keyword">function</span> (<span class="params">fn, thisValue</span>) &#123;</span><br><span class="line">  <span class="comment">// thisValue：执行callback函数时被用作this的值</span></span><br><span class="line">  thisValue = thisValue || <span class="literal">undefined</span> <span class="comment">// 省略 thisValue，则回调函数的 this 为undefined</span></span><br><span class="line">  <span class="keyword">let</span> arr = <span class="variable language_">this</span> <span class="comment">// 得到需要遍历的数组arr</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// 参数分别为 this指向，当前数组项，当前索引，当前数组</span></span><br><span class="line">    fn.<span class="title function_">call</span>(thisValue, arr[i], i, arr)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 array.myForEach(function(currentValue, index, arr), thisValue)</span></span><br><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">a.<span class="title function_">myForEach</span>(<span class="function">(<span class="params">a, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`索引<span class="subst">$&#123;index&#125;</span>的值为`</span>, a + <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">// 索引0的值为 2</span></span><br><span class="line"><span class="comment">// 索引1的值为 3</span></span><br><span class="line"><span class="comment">// 索引2的值为 4</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>实现步骤：</strong><ol>
<li>解决参数2<code>thisValue</code>空值情况</li>
<li>通过this得到需要遍历的数组arr</li>
<li>遍历数组arr，通过call()让arr中每个数组元素都调用参数1<code>fn</code>，其中this指向为参数2<code>thisValue</code>，需要传入的参数是：当前数组元素，当前索引，当前数组</li>
</ol>
</li>
</ul>
<hr>
<h2 id="手写数组的reduce-【重点】"><a href="#手写数组的reduce-【重点】" class="headerlink" title="手写数组的reduce()【重点】"></a>手写数组的reduce()【重点】</h2><ul>
<li>参考<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/94003266">知乎</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce">reduce()</a> 方法对数组中的<strong>每个元素</strong>执行<strong>回调函数（参数1）</strong>(升序执行)，将其<strong>结果（函数1返回值）汇总</strong>为<strong>单个返回值</strong>。</li>
<li><code>array.reduce(callback(total, currentValue, currentIndex, arr), initialValue)</code><ul>
<li><strong>返回计算结果</strong></li>
<li>total	必需。<strong>初始值initialValue,或 上一次调用回调函数时计算结束后的返回值</strong></li>
<li>currentValue	必需。当前元素</li>
<li>currentIndex	可选。当前元素的索引</li>
<li>arr	可选。当前元素所属的数组对象。</li>
<li>initialValue	可选。<strong>传递给函数的初始值</strong></li>
</ul>
</li>
<li><strong>注意</strong>: reduce() 对于<strong>空数组</strong>是<strong>不会执行回调函数</strong>的</li>
<li><strong>重点：</strong><ul>
<li><strong>不是普通的累加</strong>，reduce()是返回 <strong>每个数组元素执行函数fn的 返回值(即回调函数的参数1) 的累加</strong>，所以<strong>for循环内要特别注意调用函数fn</strong>（<a target="_blank" rel="noopener" href="https://www.runoob.com/try/try.php?filename=tryjsref_reduce2">例子</a>）</li>
<li><strong>！！不用自己来累加，累加规则是在fn中定义的</strong></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myReduce</span> = <span class="keyword">function</span> (<span class="params">fn, initialValue</span>) &#123;</span><br><span class="line">  <span class="comment">// 1.常规判断</span></span><br><span class="line">  <span class="keyword">let</span> arr = <span class="variable language_">this</span>;</span><br><span class="line">  <span class="comment">// 判断是否为空数组，对于空数组不执行回调函数fn</span></span><br><span class="line">  <span class="keyword">if</span> (arr.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&#x27;empty array&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 判断传入的第一个参数是否为函数</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> fn !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">`<span class="subst">$&#123;fn&#125;</span> is not a function`</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.初始化各个变量</span></span><br><span class="line">  <span class="comment">// 初始化累计结果total</span></span><br><span class="line">  <span class="keyword">let</span> total = initialValue ? initialValue : arr[<span class="number">0</span>];</span><br><span class="line">  <span class="comment">// 注意：i的起始值和是否传入参数2 initialValue 有关</span></span><br><span class="line">  <span class="keyword">let</span> i = initialValue ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3.循环【重点】</span></span><br><span class="line">  <span class="comment">// 返回累计结果total</span></span><br><span class="line">  <span class="keyword">for</span> (i; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// 注意：reduce做的不是普通的累加，是 每个数组元素执行函数fn的 返回值 的累加，total既是函数返回值也是累计</span></span><br><span class="line">    total = <span class="title function_">fn</span>(total, arr[i], i, arr);</span><br><span class="line">    <span class="comment">// ！不用自己来累加，累加规则是在fn中定义的</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 4.返回累计结果total</span></span><br><span class="line">  <span class="keyword">return</span> total;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">4</span>, <span class="number">8</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">23</span>, <span class="number">42</span>];</span><br><span class="line"><span class="keyword">let</span> add = <span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> sum = arr.<span class="title function_">myReduce</span>(add, <span class="number">10</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sum); <span class="comment">// 118</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>思路：</strong><ol>
<li><strong>常规判断</strong>：主要要判断的是调用数组、传入参数</li>
<li><strong>初始化各个变量</strong>，为第一次执行函数做准备，这里我们需要准备的变量有需要传入回调函数的4个参数accumulator, currentValue, currentIndex, sourceArray</li>
<li><strong>开始循环</strong> 同时记得更新几个参数和返回结果</li>
<li><strong>返回结果</strong></li>
</ol>
</li>
</ul>
<hr>
<h1 id="手写通用深拷贝"><a href="#手写通用深拷贝" class="headerlink" title="手写通用深拷贝"></a>手写通用深拷贝</h1><ul>
<li><strong>重点</strong>：<ul>
<li><strong>for…in 遍历 对象属性&#x2F;数组元素</strong>，key是属性名&#x2F;数组下标。</li>
<li>for…in会遍历到对象&#x2F;数组的继承属性，<strong>注意筛选自身属性</strong></li>
<li><strong>注意：是<code>Array.isArray(obj)</code>，Array开头</strong></li>
<li><strong>注意：<code>typeof obj !== &quot;object&quot;</code>有引号</strong></li>
<li><strong>注意：筛选自身属性使用的是<code>obj.hasOwnProperty(key)</code>，obj开头</strong></li>
</ul>
</li>
<li>可参考<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/02/01/JS%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E5%92%8C%E8%AE%A1%E7%AE%97/#%E6%89%8B%E5%86%99%E6%B7%B1%E6%8B%B7%E8%B4%9D">“JS变量类型和计算”</a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 深拷贝方法1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; obj 要拷贝的对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deepClone</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="comment">// 如遇值类型则直接返回，否则继续执行【注意Object有引号】</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&quot;object&quot;</span> || obj === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 初始化返回结果</span></span><br><span class="line">  <span class="keyword">let</span> cloneObj = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj) ? [] : &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 遍历对象属性/数组元素</span></span><br><span class="line">  <span class="keyword">for</span> (key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="comment">// 筛选对象自身属性</span></span><br><span class="line">    <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">      <span class="comment">// 递归调用deepClone()，</span></span><br><span class="line">      cloneObj[key] = <span class="title function_">deepClone</span>(obj[key])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 返回结果</span></span><br><span class="line">  <span class="keyword">return</span> cloneObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 深拷贝方法2</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; obj 要拷贝的对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deepClone</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">  <span class="comment">// 根据传入的参数obj判断拷贝数组还是对象</span></span><br><span class="line">  <span class="keyword">let</span> objClone = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj)?[]:&#123;&#125;;</span><br><span class="line">  <span class="comment">// 判断参数obj是否是引用类型（数组/对象）【注意Object有引号】</span></span><br><span class="line">  <span class="keyword">if</span>(obj &amp;&amp; <span class="keyword">typeof</span> obj===<span class="string">&quot;object&quot;</span>)&#123;</span><br><span class="line">      <span class="comment">// 是对象则用for in遍历 对象属性</span></span><br><span class="line">      <span class="keyword">for</span>(key <span class="keyword">in</span> obj)&#123;</span><br><span class="line">          <span class="comment">// 如果是非继承属性</span></span><br><span class="line">          <span class="keyword">if</span>(obj.<span class="title function_">hasOwnProperty</span>(key))&#123;</span><br><span class="line">          <span class="comment">//判断ojb子元素（数组元素/对象属性）是否为引用类型（数组、对象、函数）</span></span><br><span class="line">              <span class="keyword">if</span>(obj[key]&amp;&amp;<span class="keyword">typeof</span> obj[key] ===<span class="string">&quot;object&quot;</span>)&#123;</span><br><span class="line">                  <span class="comment">//是则递归复制</span></span><br><span class="line">                  objClone[key] = <span class="title function_">deepClone</span>(obj[key]);</span><br><span class="line">              &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                  <span class="comment">//如果不是，简单复制</span></span><br><span class="line">                  objClone[key] = obj[key];</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> objClone;</span><br><span class="line">&#125;    </span><br><span class="line"><span class="keyword">let</span> a=[<span class="number">0</span>, <span class="number">1</span>, <span class="literal">null</span>, [<span class="number">1</span>, <span class="number">2</span>], &#123; <span class="attr">name</span>: <span class="string">&quot;a&quot;</span> &#125;, <span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;],</span><br><span class="line">  b=<span class="title function_">deepClone</span>(a);</span><br><span class="line">b[<span class="number">3</span>][<span class="number">0</span>] = <span class="number">5</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a,b);</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="读代码写输出结果"><a href="#读代码写输出结果" class="headerlink" title="读代码写输出结果"></a>读代码写输出结果</h1><ul>
<li><strong>注意：</strong>当出现多个同名变量与同名函数时，调用该变量名时的优先级为：<strong>变量声明&lt; 函数声明 &lt; 变量赋值</strong></li>
<li>原型和实例上属性相同，<strong>优先从实例上查找</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    getName = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="property">log</span> (<span class="number">1</span>); &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Foo</span>.<span class="property">getName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="property">log</span> (<span class="number">2</span>);&#125;;</span><br><span class="line"><span class="title class_">Foo</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="property">log</span> (<span class="number">3</span>);&#125;;</span><br><span class="line"><span class="keyword">var</span> getName = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="property">log</span> (<span class="number">4</span>);&#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getName</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="property">log</span> (<span class="number">5</span>);&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 相当于</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getName</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="property">log</span> (<span class="number">5</span>);&#125; <span class="comment">// 函数提升</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    getName = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="property">log</span> (<span class="number">1</span>); &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Foo</span>.<span class="property">getName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="property">log</span> (<span class="number">2</span>);&#125;;</span><br><span class="line"><span class="title class_">Foo</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="property">log</span> (<span class="number">3</span>);&#125;;</span><br><span class="line"><span class="keyword">var</span> getName = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="property">log</span> (<span class="number">4</span>);&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//请写出以下输出结果：</span></span><br><span class="line"><span class="title class_">Foo</span>.<span class="title function_">getName</span>();  <span class="comment">// 2</span></span><br><span class="line"><span class="title function_">getName</span>();     <span class="comment">// 4</span></span><br><span class="line"><span class="title class_">Foo</span>().<span class="title function_">getName</span>(); <span class="comment">// 1</span></span><br><span class="line"><span class="title function_">getName</span>();     <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Foo</span>.<span class="title function_">getName</span>();  <span class="comment">//2</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Foo</span>().<span class="title function_">getName</span>();  <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">new</span> <span class="keyword">new</span> <span class="title class_">Foo</span>().<span class="title function_">getName</span>();<span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<ol>
<li><code>Foo.getName(); //2 </code>获取Foo对象的getName属性，原型和实例上属性相同，<strong>优先从实例上查找</strong></li>
<li>【重点】<code>getName(); //4 </code>因为直接调用getName，所以排除1,2,3。 4和5有<strong>变量声明提升和函数声明提升</strong> 两个坑，<strong>函数声明</strong>是<strong>整个函数提升</strong>，所以5被提升到4上面。使用函数表达式声明的函数不存在函数提升。所以最后是4。</li>
<li>【重点】<code>Foo().getName(); //1 </code>先<strong>执行Foo()返回的this指向window</strong>,此时的<code>Foo().getName()</code>就<strong>相当于<code>window.getName()</code></strong>,则由1、4、5可选，由于该函数第一行<code>getName = function () &#123; alert (1); &#125;;</code>没有用var声明，所以是操作的是全局变量,因此修改了先前的getName()函数(5、4)【如果1中有var则最终结果是4】</li>
<li>【重点】<code>getName(); //1 </code>同上<code>window.getName()</code>【如果1中有var则最终结果是4】</li>
<li><code>new Foo.getName(); //2 </code>考察<strong>js运算符优先级</strong> 这里的new操作符是无参数的所以优先级低，<strong>实际执行结果<code>new ((Foo.getName)())</code></strong></li>
<li>【重点】<code>new Foo().getName(); //3 </code>实际相当于<code>(new Foo()).getName()</code>，隐式原型没有就去构造函数的显式原型找，于是找到3</li>
<li>【重点】<code>new new Foo().getName(); //3</code>先初始化Foo的实例化对象，1没绑定在this上，所以会一路找到显式原型（3），将<strong>其原型上的getName作为构造函数再次new</strong>，还是3</li>
</ol>
<p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166579def5f81853?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="运算符优先级"></p>
<hr>
<h1 id="简述call-apply-bind区别"><a href="#简述call-apply-bind区别" class="headerlink" title="简述call,apply,bind区别"></a>简述call,apply,bind区别</h1><ul>
<li><strong>共同点：</strong><ul>
<li>都是用来<strong>改变函数的this对象的指向</strong>的。</li>
<li><strong>第一个参数都是this要指向的对象</strong>。</li>
<li>都可以<strong>利用后续参数传参</strong>。</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2019/10/08/call()%E4%B8%8Eapply()/">call跟apply</a>的用法几乎一样，唯一的不同就是传递的参数不同。<ul>
<li>call只能<strong>一个参数一个参数</strong>的传入。</li>
<li>apply则只支持<strong>传入一个数组</strong>，哪怕是一个参数也要是数组形式。最终调用函数时候这个数组会拆成一个个参数分别传入。</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2019/11/24/bind()/#bind">bind方法</a>，他是直接改变这个函数的this指向并且<strong>返回一个新的函数</strong>，之后再次调用这个函数的时候this都是指向bind绑定的第一个参数。<strong>bind传参方式可以跟call方法一致</strong>。<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 传参方式对比</span><br><span class="line">xw.say.call(<span class="built_in">xh</span>,<span class="string">&quot;实验小学&quot;</span>,<span class="string">&quot;六年级&quot;</span>)<span class="comment">;</span></span><br><span class="line">xw.say.apply(<span class="built_in">xh</span>,[<span class="string">&quot;实验小学&quot;</span>,<span class="string">&quot;六年级&quot;</span>])<span class="comment">;</span></span><br><span class="line">xw.say.bind(<span class="built_in">xh</span>,<span class="string">&quot;实验小学&quot;</span>,<span class="string">&quot;六年级&quot;</span>)()<span class="comment">;</span></span><br><span class="line">xw.say.bind(<span class="built_in">xh</span>)(<span class="string">&quot;实验小学&quot;</span>,<span class="string">&quot;六年级&quot;</span>)<span class="comment">; // 由于bind返回的仍然是一个函数，所以我们还可以在调用的时候再进行传参。</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="手写call"><a href="#手写call" class="headerlink" title="手写call()"></a>手写call()</h2><ul>
<li>对<strong>this指向</strong>的理解</li>
<li><a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/02/07/ES6%20%E5%8F%82%E6%95%B0%E9%BB%98%E8%AE%A4%E5%80%BC/">ES6 参数默认值</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete">delete 操作符</a>用于<strong>删除对象的某个属性</strong></li>
<li><strong>注意：虽然call()不是返回新的函数，但<code>f.call(obj, 1, 2) </code>中执行函数f所返回的东西就是最终返回的，所以手动实现时要注意返回值</strong><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数的方法，所以写在Fuction原型对象上</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myCall</span> = <span class="keyword">function</span> (<span class="params">context = <span class="variable language_">window</span></span>) &#123; <span class="comment">// ES6方法，为参数添加默认值，js严格模式全局作用域this为undefined</span></span><br><span class="line">  <span class="comment">// 传入的参数1 context 设置为this，即现在调用方法的对象</span></span><br><span class="line">  <span class="keyword">const</span> obj = context; </span><br><span class="line">  <span class="comment">// this为原本调用的上下文,this此处为函数（即f.myCall()中的f），将这个函数作为obj的方法，让传入的this（即obj）来调用这个方法</span></span><br><span class="line">  obj.<span class="property">fn</span> = <span class="variable language_">this</span>;      </span><br><span class="line">  <span class="comment">//第一个为obj所以删除,伪数组转为数组</span></span><br><span class="line">  <span class="keyword">const</span> args = [...<span class="variable language_">arguments</span>].<span class="title function_">slice</span>(<span class="number">1</span>)   </span><br><span class="line">  <span class="comment">// 注意：执行函数f所返回的东西就是最终返回的</span></span><br><span class="line">  <span class="keyword">let</span> res = obj.<span class="title function_">fn</span>(...args);</span><br><span class="line">  <span class="comment">// 不删除会导致context属性越来越多</span></span><br><span class="line">  <span class="keyword">delete</span> obj.<span class="property">fn</span>;   </span><br><span class="line">  <span class="comment">// 注意：这里把obj.fn(...args)返回，调用myCall()就相当于调用obj.fn(...args)</span></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//用法：f.myCall(obj,arg1)</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a + b)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">f.<span class="title function_">myCall</span>(obj, <span class="number">1</span>, <span class="number">2</span>) <span class="comment">// 3,1 原本this指向window</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="手写apply"><a href="#手写apply" class="headerlink" title="手写apply()"></a>手写apply()</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数的方法，所以写在Fuction原型对象上</span></span><br><span class="line"><span class="comment">// 箭头函数从不具有参数对象！！！！！这里不能写成箭头函数</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myApply</span> = <span class="keyword">function</span> (<span class="params">context = <span class="variable language_">window</span></span>) &#123; <span class="comment">// ES6方法，为参数添加默认值</span></span><br><span class="line">  <span class="keyword">let</span> obj = context <span class="comment">// 传入的参数1 context 设置为this，即现在调用方法的对象</span></span><br><span class="line">  obj.<span class="property">fn</span> = <span class="variable language_">this</span> <span class="comment">// this为原本调用的上下文,this此处为函数（即f.myCall()中的f），将这个函数作为obj的方法，让传入的this（即obj）来调用这个方法</span></span><br><span class="line">  <span class="keyword">const</span> arg = <span class="variable language_">arguments</span>[<span class="number">1</span>] || []    <span class="comment">// 若有参数，得到的是数组</span></span><br><span class="line">  <span class="keyword">let</span> res = obj.<span class="title function_">fn</span>(...arg)</span><br><span class="line">  <span class="keyword">delete</span> obj.<span class="property">fn</span> </span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//用法：f.myApply(obj,[arg1,...])</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a, b)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">f.<span class="title function_">myApply</span>(obj, [<span class="number">1</span>, <span class="number">2</span>])  <span class="comment">// 1,2 张三</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="手写bind"><a href="#手写bind" class="headerlink" title="手写bind()"></a>手写bind()</h2><ul>
<li>返回一个原函数的拷贝，并拥有指定的 this 值和初始参数。</li>
<li>剩余参数<code>...</code>是做聚合的，它会将那些没有对应形参的实参们聚合成一个数组。而扩展运算符<code>...</code>是做展开的，符号都是<code>...</code>,但含义不同。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fn.bind(obj,arg1)()</span></span><br><span class="line"><span class="comment">// 函数的方法，所以写在Fuction原型对象上</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myBind</span> = <span class="keyword">function</span> (<span class="params">context = <span class="variable language_">window</span></span>) &#123; <span class="comment">// ES6方法，为参数添加默认值</span></span><br><span class="line">  <span class="comment">// 传入的参数1 context 设置为this，即现在调用方法的对象</span></span><br><span class="line">  <span class="keyword">let</span> obj = context</span><br><span class="line">  <span class="comment">// this为f.myBind(...) 中的 f</span></span><br><span class="line">  obj.<span class="property">fn</span> = <span class="variable language_">this</span></span><br><span class="line">  <span class="keyword">let</span> args = [...<span class="variable language_">arguments</span>].<span class="title function_">slice</span>(<span class="number">1</span>); </span><br><span class="line">  <span class="comment">// 和call、apply不同的是bind返回的是一个新的函数</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj.<span class="title function_">fn</span>(...args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用法：f.myBind(obj,arg1)()</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a + b)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;李四&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">f.<span class="title function_">myBind</span>(obj, <span class="number">1</span>, <span class="number">2</span>)() <span class="comment">// 3 李四</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="instanceof【重点复习】"><a href="#instanceof【重点复习】" class="headerlink" title="instanceof【重点复习】"></a>instanceof【重点复习】</h1><ul>
<li><strong>注意：<code>[] instanceof Array</code>和<code>[] instanceof Object</code>都是true</strong></li>
<li><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/js/js-break.html">break 语句</a><strong>可用于</strong>跳出循环</strong>，break 语句跳出循环后，会继续执行该循环之后的代码（如果有的话），只能用在循环或 switch 中。</li>
<li>考察对**<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/02/04/JS%20class%E5%92%8C%E7%BB%A7%E6%89%BF%20%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/#%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%87%AA%E7%94%B1%E6%89%A9%E5%B1%95%E5%B1%9E%E6%80%A7">原型链</a>**的理解</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof">instanceof 运算符</a>用于检测<strong>构造函数的 prototype 属性</strong>是否出现在某个<strong>实例对象的原型链</strong>上。</li>
<li><code>引用类型（对象、数组、函数） instanceof 构造函数</code></li>
<li><strong>作用</strong>：测试它 <strong>左边的引用类型（对象、数组、函数）实例对象</strong> 是否是它 <strong>右边的构造函数（Object()、Array()、Funtion()）的实例</strong></li>
<li><strong>思路：</strong> <ul>
<li>如果<strong>左边为基本数据类型</strong>，就<strong>直接返回false</strong></li>
<li>instanceof 在查找的过程中会<strong>遍历左边实例对象的原型链</strong>，直到找到<strong>右边变量的 prototype</strong>才返回true，查找失败返回 false</li>
<li>首先 instanceof <strong>左侧必须是对象</strong>, 才能找到它的原型链</li>
<li>instanceof <strong>右侧必须是函数</strong>, 函数才会prototype属性</li>
<li><strong>迭代</strong> , 左侧对象的原型<strong>不等于</strong>右侧的 prototype时, 沿着原型链<strong>重新赋值左侧</strong></li>
</ul>
</li>
<li><strong>注意：</strong><ul>
<li>**<code>Object.prototype.__proto__ === null; // true</code>**。</li>
<li><strong>结束while循环</strong>可使用<strong>无条件跳出语句<code>break;</code><strong>或</strong>函数返回语句<code>return</code></strong></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// [1,2,3] instanceof Array ---- true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// L instanceof R</span></span><br><span class="line"><span class="comment">// 函数R的显式原型 存在于 变量L的原型链上</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">instance_of</span>(<span class="params">L,R</span>)&#123;    </span><br><span class="line">    <span class="comment">// 验证如果为基本数据类型，就直接返回false</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> L !== <span class="string">&quot;object&quot;</span> || L === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> <span class="variable constant_">RP</span>  = R.<span class="property"><span class="keyword">prototype</span></span>;  <span class="comment">//取 R 的显示原型</span></span><br><span class="line">    L = L.<span class="property">__proto__</span>;       <span class="comment">//取 L 的隐式原型</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)&#123;           <span class="comment">// 无线循环的写法（也可以使 for(;;) ）</span></span><br><span class="line">        <span class="keyword">if</span>(L === <span class="literal">null</span>)&#123;    <span class="comment">//找到最顶层，即L为 构造函数.prototype 时还没找到RP则false</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;   <span class="comment">// return会结束while循环</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(L === <span class="variable constant_">RP</span>)&#123;       <span class="comment">//严格相等</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        L = L.<span class="property">__proto__</span>;  <span class="comment">//没找到则继续向上一层原型链查找</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">instance_of</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="title class_">Array</span>));  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="new【重点复习】"><a href="#new【重点复习】" class="headerlink" title="new【重点复习】"></a>new【重点复习】</h1><ul>
<li>对<strong>创建对象实例过程</strong>的理解</li>
<li><strong>new一个对象的步骤：</strong><ol>
<li>创建一个<strong>新（空）对象obj</strong></li>
<li>将<strong>空对象的隐式原型</strong>（<code>__proto__</code>）<strong>指向构造函数的显式原型</strong>（<code>prototype</code>）</li>
<li>使<strong>用apply()改变this指向</strong>，让<strong>构造函数的this指向新对象obj</strong>，让obj调用构造函数fn，为实例obj添加方法和属性</li>
<li>确保<strong>返回的是一个对象</strong>，如构造函数fn无返回值或返回一个非对象值，则将 obj 返回作为新对象；如返回值是新对象则直接返回该对象。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数Person</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayHi</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hi！我是&#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">p1.<span class="title function_">sayHi</span>() <span class="comment">// Hi！我是张三</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 手动实现new</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">create</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 创建新对象obj</span></span><br><span class="line">  <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">  <span class="comment">// 获取构造函数fn</span></span><br><span class="line">  <span class="keyword">let</span> fn = [...<span class="variable language_">arguments</span>].<span class="title function_">shift</span>()  <span class="comment">//将arguments对象转化为数组，删除arguments数组的第一个元素</span></span><br><span class="line">  <span class="comment">// 将新对象的隐式原型指向构造函数的 显式原型</span></span><br><span class="line">  obj.<span class="property">__proto__</span> = fn.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line">  <span class="comment">// 使用apply()改变this指向新对象obj，让obj调用构造函数fn，为实例obj添加方法和属性</span></span><br><span class="line">  <span class="keyword">let</span> res = fn.<span class="title function_">apply</span>(obj, <span class="variable language_">arguments</span>)</span><br><span class="line">  <span class="comment">// 确保返回的是一个对象，如构造函数fn无返回值或返回一个非对象值，则将 obj 返回作为新对象；如返回值是新对象则直接返回该对象</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> res === <span class="string">&#x27;object&#x27;</span> ? res : obj</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = <span class="title function_">create</span>(<span class="title class_">Person</span>, <span class="string">&#x27;李四&#x27;</span>, <span class="number">19</span>)</span><br><span class="line">p2.<span class="title function_">sayHi</span>() <span class="comment">// Hi！我是李四</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<hr>
<h1 id="防抖和节流"><a href="#防抖和节流" class="headerlink" title="防抖和节流"></a>防抖和节流</h1><ul>
<li><strong>区别：</strong> <strong>防抖</strong>是在触发结束<strong>后</strong> n秒 <strong>都没触发了</strong>才会执行事件函数，<strong>节流</strong>则是<strong>只要连续触发，每过n秒就执行一次事件函数</strong>，不会因为连续触发就重新计算n秒起始位置。</li>
<li><strong>思路区别：</strong><ul>
<li>都是使用<strong>定时器setTimeout</strong>与<strong>定时器id（timer）</strong></li>
<li><strong>防抖</strong>需要<strong>清除定时器</strong>（<code>clearTimeout(timer)</code>），当<strong>存在 定时器id（timer） 时</strong>清除定时器，<strong>以此保证 之前设置的延迟事件 在 当前延迟时间内 再次触发时，之前的延迟事件 不会被执行</strong>，<strong>节流则不需要清除定时器</strong>。</li>
<li>相对的，<strong>节流</strong>是当<strong>存在 定时器id（timer） 时</strong>，直接<strong>退出事件函数</strong>（<code>return</code>），<strong>避免在 当前延迟时间内 产生新的定时器，以此保证每一段延迟时间内只触发一次事件函数</strong></li>
<li>其他都一样。</li>
</ul>
</li>
<li><strong>注意：封装 可复用函数debounce()&#x2F;throttle()<strong>时，在函数内要</strong>返回函数！</strong>否则调用debounce()&#x2F;throttle()时没有函数可调用。具体原因可看<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/04/04/JS%20%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/#%E8%8A%82%E6%B5%81-throttle">“JS 运行环境”中“节流”在 普通事件函数中 的代码和 封装 后的代码区别</a>，不对函数进行封装则不需要返回函数。<ul>
<li><strong>【切记！】对xx封装就要返回xx</strong>，这里<strong>debounce()&#x2F;throttle()都是对 函数（原本的事件函数） 进行封装，所以他们都需要返回被封装的函数（即原本的事件函数）</strong>，否则在绑定事件函数时，throttle()就变成直接<strong>调用函数</strong>了，而这里需要的是事件函数。</li>
</ul>
</li>
</ul>
<h2 id="防抖【重点复习】【函数内返回函数，才能调用-debounce-，对比“JS-运行环境”中“节流”在-普通事件函数中-的代码和-封装-后的代码区别，思考为啥】"><a href="#防抖【重点复习】【函数内返回函数，才能调用-debounce-，对比“JS-运行环境”中“节流”在-普通事件函数中-的代码和-封装-后的代码区别，思考为啥】" class="headerlink" title="防抖【重点复习】【函数内返回函数，才能调用 debounce()，对比“JS 运行环境”中“节流”在 普通事件函数中 的代码和 封装 后的代码区别，思考为啥】"></a>防抖【重点复习】【函数内返回函数，才能调用 debounce()，对比“JS 运行环境”中“节流”在 普通事件函数中 的代码和 封装 后的代码区别，思考为啥】</h2><ul>
<li>推理过程可参考<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/04/04/JS%20%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/#%E9%98%B2%E6%8A%96-debounce">“JS 运行环境”</a></li>
<li><strong><a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/04/04/JS%20%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/#%E9%98%B2%E6%8A%96-debounce">防抖</a><strong>：指触发事件</strong>后</strong>在 <strong>n 秒内函数只能执行一次，如果在 n 秒内又触发了事件，则以最后一次触发为标准重新计算函数执行时间</strong>。<ul>
<li><strong>与节流的区别</strong>：<strong>防抖</strong>是在触发结束<strong>后</strong> n秒 <strong>都没触发了</strong>才会执行事件函数，<strong>节流</strong>则是<strong>只要连续触发n秒就执行事件函数</strong>，不会因为连续触发就重新计算n秒起始位置。</li>
</ul>
</li>
<li>（连续不断触发时不调用，触发完后过一段时间调用）</li>
<li><strong>比如</strong>，监听一个输入框的文字变化后触发change事件，直接用keyup事件，则会频发触发change事件。如果<strong>使用防抖</strong>，则连续不断输入时，不会触发change事件；<strong>当一段时间内不输入了，才会触发change事件</strong>；如果<strong>小于这段时间继续输入的话，时间会重新计算，也不会触发change事件</strong>。（防抖不仅限于change事件）</li>
<li>实际上是对<strong>定时器setTimeout</strong>的使用，但我们通常将其<strong>封装为debounce函数</strong>来使用</li>
<li><strong>代码思路：</strong><ul>
<li>debounce函数，<strong>参数1:事件函数，参数2：防抖时间（delay毫秒）</strong></li>
<li>debounce函数内，使用 <strong>定时器setTimeout() 延迟（delay毫秒）执行事件函数</strong></li>
<li>每次触发事件都会生成<strong>定时器id（timer）</strong>，如之前<strong>已存在定时器id</strong>（timer），则<strong>删除之前的定时器</strong>（<code>clearTimeout(timer)</code>），重新<strong>产生 新定时器 以及 新的timer</strong> ，并在<strong>新定时器内 清除上一个timer</strong>(<code>timer=null</code>)<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;input1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay = <span class="number">500</span></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (<span class="keyword">typeof</span> fn !== <span class="string">&#x27;function&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&#x27;fn不是函数&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 创建timer存储定时器id</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 返回的函数就是debounce函数，下面调用debounce()时传入的参数1（箭头函数）和参数2（delay）实际都传到这个返回函数中。只有返回函数，才能调用 debounce()</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 需要被封装的 事件函数 ，所以封装函数内要返回函数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> args = [...<span class="variable language_">arguments</span>];</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (timer) &#123; <span class="comment">// 一开始为空，则不执行清空</span></span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">clearTimeout</span>(timer);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 回调函数内this指向默认window，使用箭头函数获取我们希望的this指向</span></span></span><br><span class="line"><span class="language-javascript">      timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">// setTimeout()返回定时器id</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 用apply指向调用debounce的对象，防止fn有this或者参数（arguments对象，包括e）需要传入debounce函数</span></span></span><br><span class="line"><span class="language-javascript">        fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span></span><br><span class="line"><span class="language-javascript">      &#125;, delay);</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 调用</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> input1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;input1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// debounce()必须返回函数，否则debounce()就变成直接调用函数了，而这里需要的是事件函数</span></span></span><br><span class="line"><span class="language-javascript">  input1.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keyup&#x27;</span>, <span class="title function_">debounce</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 一般为发送ajax请求</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(input1.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">  &#125;), <span class="number">600</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><strong>案例解释</strong>：<ol>
<li>timer用于存储定时器id，<strong>输入a时</strong>，通过<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2019/12/08/setTimeout%E4%B8%8EsetInterval/#setTimeout">setTimeout</a>给timer赋值，准备500毫秒后触发打印</li>
<li><strong>紧接着输入s时</strong>,由于此时timer不为空，所以<strong>执行clearTimerout将之前的定时器清除，重新创建setTimeout</strong>给timer赋值，准备500毫秒后触发打印</li>
<li><strong>依旧紧接着输入d时</strong>，一直到s都重复上一步逻辑</li>
<li><strong>直到输入最后一个f时</strong>，清除了上一个timer后创建了新的timer，且500毫秒后未被清除，故<strong>打印asdfasdfasf</strong>，并将timer清空</li>
</ol>
</li>
</ul>
<hr>
<h2 id="节流【重点复习】"><a href="#节流【重点复习】" class="headerlink" title="节流【重点复习】"></a>节流【重点复习】</h2><ul>
<li><strong><a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/04/04/JS%20%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/#%E8%8A%82%E6%B5%81-throttle">节流</a>：</strong>连续触发事件但是在 <strong>n 秒中只执行一次函数</strong><ul>
<li><strong>与防抖的区别</strong>：<strong>防抖</strong>是在触发结束<strong>后</strong> n秒 <strong>都没触发了</strong>才会执行事件函数，<strong>节流</strong>则是<strong>只要连续触发n秒就执行事件函数</strong>，不会因为连续触发就重新计算n秒起始位置。</li>
</ul>
</li>
<li><strong>比如</strong>:（连续不断动都需要调用时用，设一时间间隔），拖拽一个元素时，要随时拿到该元素被拖拽的位置。这里直接用drag事件则会频发触发，很容易导致卡顿。而使用<strong>节流</strong>，则<strong>无论拖拽速度多快，都会每隔100ms触发一次（时间自定义）</strong>。<ul>
<li><strong>注意：如果用防抖的话，就会出现卡顿的感觉，因为只在停止的时候执行了一次，这个时候就应该用节流，在一定时间内多次执行，会流畅很多</strong>。</li>
<li>应当应用节流的拖拽元素，<strong>调用防抖</strong>则<strong>停止拖拽时才会执行事件函数</strong>。</li>
</ul>
</li>
<li><strong>代码思路：</strong><ul>
<li>throttle函数，<strong>参数1:事件函数，参数2：节流时间（delay毫秒）</strong></li>
<li>throttle函数内，使用 <strong>定时器setTimeout() 延迟（delay毫秒）执行事件函数，生成定时器id（timer）</strong></li>
<li>每次触发事件都会生成<strong>定时器id（timer）</strong>，如之前<strong>已存在定时器id</strong>（timer），则<strong>直接退出事件函数</strong>（<code>return</code>），直到事件函数执行完成后删除当前timer才允许再次通过定时器设置新的timer。<strong>以此保证delay毫秒内只产生1个timer</strong>，当这次<strong>事件函数执行完成后清除当前timer</strong>(<code>timer=null</code>)，<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- draggable设置为可拖拽元素 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span>&gt;</span>可拖拽<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 使用节流，则无论拖拽速度多快，都会每隔100ms触发一次（时间自定义）</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, delay = <span class="number">100</span></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// timer在闭包内</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 返回的函数就是throttle函数，下面调用throttle()时传入的参数1（箭头函数）和参数2（delay）实际都传到这个返回函数中。只有返回函数，才能调用throttle()</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 需要被封装的 事件函数 ，所以封装函数内要返回函数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> args = [...<span class="variable language_">arguments</span>];</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (timer) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 这里如果用fn()，则e无法传入</span></span></span><br><span class="line"><span class="language-javascript">        fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args); <span class="comment">// 这里args接收的是外边返回的函数的参数，不能用arguments</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// fn.apply(this, arguments); 需要注意：Chrome 14 以及 Internet Explorer 9 仍然不接受类数组对象。如果传入类数组对象，它们会抛出异常。</span></span></span><br><span class="line"><span class="language-javascript">        timer = <span class="literal">null</span>; <span class="comment">// 在delay后执行完fn之后清空timer，此时timer为假，throttle触发可以进入计时器</span></span></span><br><span class="line"><span class="language-javascript">      &#125;, delay)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> div1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;div1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// throttle()必须返回函数，否则throttle()就变成直接调用函数了，而这里需要的是事件函数</span></span></span><br><span class="line"><span class="language-javascript">  div1.<span class="title function_">addEventListener</span>(<span class="string">&#x27;drag&#x27;</span>, <span class="title function_">throttle</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 相对于定位父盒子的x，y坐标</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">offsetX</span>, e.<span class="property">offsetY</span>)</span></span><br><span class="line"><span class="language-javascript">  &#125;, <span class="number">500</span>))</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><strong>e和apply()的关系</strong>可见<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/04/04/JS%20%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/#%E8%8A%82%E6%B5%81-throttle">“JS 运行环境”的“节流”最后的图示和注意</a></li>
<li><strong>案例解释：</strong><ol>
<li>和节流相似，都设置一个定时器，初始为空</li>
<li>元素开始拖拽时触发事件，根据setTimeout返回的id赋给timer，此时需要等待100毫秒才打印位置</li>
<li>由于快速拖动元素，100毫秒内再次出发drag事件，但此时<strong>timer有值，直接退出drag事件，直到100毫秒位置打印后timer清空才会再走第二步</strong>。以此实现无论拖拽速度多快，都会每隔100ms触发一次drag事件</li>
</ol>
</li>
</ul>
<hr>
<h1 id="手写ajax"><a href="#手写ajax" class="headerlink" title="手写ajax"></a>手写ajax</h1><ul>
<li>下面是get请求，post请求的实现可看<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/03/01/JS%20Web%20API%20AJAX/#post%E8%AF%B7%E6%B1%82">“JS Web API AJAX”</a></li>
<li><strong>步骤：</strong><ol>
<li>创建 XMLHttpRequest 实例</li>
<li>发出 HTTP 请求</li>
<li>服务器返回 JSON 格式的字符串</li>
<li>JS 解析 JSON，并更新局部页面</li>
</ol>
</li>
<li>不过随着历史进程的推进，XML 已经被淘汰，取而代之的是 JSON。(<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/03/01/JS%20Web%20API%20AJAX/#responseText-%E4%B8%8E-responseXML-%E5%B1%9E%E6%80%A7">responseText 获得字符串形式的响应数据，responseXML 获得 XML 形式的响应数据</a>)</li>
<li><strong>手写最简单的 GET 请求：</strong><figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 创建 XMLHttpRequest 实例，以调用方法</span></span><br><span class="line">  <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">  <span class="comment">// 创建 HTTP 请求。参数2，url。参数三：异步</span></span><br><span class="line">  xhr.open(<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;https://www.google.com&#x27;</span>)</span><br><span class="line">  <span class="comment">// 每当 readyState 属性改变时，就会调用onreadystatechange</span></span><br><span class="line">  xhr.onreadystatechange = () =&gt; &#123;</span><br><span class="line">    <span class="comment">// 必须在readyState属性值为4时才能去判断status属性，否则拿不到status属性值</span></span><br><span class="line">    <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">      <span class="comment">// 200-300请求成功</span></span><br><span class="line">      <span class="keyword">if</span> (xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">300</span>) &#123;</span><br><span class="line">        <span class="comment">// responseText获得字符串形式的响应数据</span></span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">string</span> = xhr.responseText</span><br><span class="line">        <span class="comment">// JSON.parse() 方法用来解析JSON字符串，构造由字符串描述的JavaScript值或对象</span></span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">object</span> = JSON.parse(<span class="keyword">string</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  xhr.send() <span class="comment">// 用于实际发出 HTTP 请求。不带参数为GET请求</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line">myButton.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  ajax()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><strong>封装为promise:</strong><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">function <span class="built_in">ajax</span>(url) &#123;</span><br><span class="line">  const <span class="selector-tag">p</span> = new <span class="built_in">Promise</span>((resolve, reject) =&gt; &#123;</span><br><span class="line">    let xhr = new <span class="built_in">XMLHttpRequest</span>()</span><br><span class="line">    xhr<span class="selector-class">.open</span>(<span class="string">&#x27;get&#x27;</span>, url)</span><br><span class="line">    xhr<span class="selector-class">.onreadystatechange</span> = () =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr<span class="selector-class">.readyState</span> == <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (xhr<span class="selector-class">.status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr<span class="selector-class">.status</span> &lt;= <span class="number">300</span>) &#123;</span><br><span class="line">          <span class="built_in">resolve</span>(JSON<span class="selector-class">.parse</span>(xhr.responseText))</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="built_in">reject</span>(<span class="string">&#x27;请求出错&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    xhr<span class="selector-class">.send</span>()  <span class="comment">//发送hppt请求</span></span><br><span class="line">  &#125;)</span><br><span class="line">  return <span class="selector-tag">p</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line">let url = <span class="string">&#x27;/data.json&#x27;</span></span><br><span class="line"><span class="function"><span class="title">ajax</span><span class="params">(url)</span></span><span class="selector-class">.then</span>(res =&gt; console<span class="selector-class">.log</span>(res))</span><br><span class="line">  <span class="selector-class">.catch</span>(reason =&gt; console<span class="selector-class">.log</span>(reason))</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="用-setTimeout-实现-setInterval"><a href="#用-setTimeout-实现-setInterval" class="headerlink" title="用 setTimeout 实现 setInterval"></a>用 setTimeout 实现 setInterval</h1><ul>
<li><a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/met-win-settimeout.html">setTimeout(code&#x2F;function, milliseconds, param1, param2, …)</a></li>
<li><a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/met-win-setinterval.html">setInterval(code&#x2F;function, milliseconds, param1, param2, …)</a></li>
<li><strong>思路：</strong>自己调用自己<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function <span class="built_in">Interval</span>(fn, time) &#123;</span><br><span class="line">  function <span class="built_in">interval</span>() &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(interval, time);</span><br><span class="line">    <span class="built_in">fn</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">setTimeout</span>(interval, time);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="图片懒加载"><a href="#图片懒加载" class="headerlink" title="图片懒加载"></a>图片懒加载</h1><ul>
<li>可参考<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/04/04/JS%20%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/#%E6%87%92%E5%8A%A0%E8%BD%BD">“JS 运行环境”中“懒加载”</a><br><img src="https://cdn.jsdelivr.net/gh/huanglizhu/huanglizhu.github.io/images/imgLazyLoad.png" alt="懒加载图示" title="懒加载图示"></li>
<li><strong>思路：</strong><ol>
<li>html内<strong>自定义属性<code>data-realsrc</code>存储图片真实src</strong>，<code>src</code>内放假图的src</li>
<li><strong>根据 DOM元素距离顶部的值(<code>img.offsetTop</code>)&lt;视口高度（<code>document.documentElement.clientHeight</code>）+页面顶部垂直滚动到视口顶部的距离(<code>document.documentElement.scrollTop</code>) 判断是否滑动到图片位置</strong></li>
<li>等**滑动到图片位置时再将<code>data-realsrc</code>赋值给<code>src</code>**，加载真实图片</li>
</ol>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 一开始加载src地址下的图片，等滑动到下一图片位置时将data-realsrc的属性值赋给src，此时即为加载真正的图片 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;img1&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./上校2.jpg&quot;</span> <span class="attr">data-realsrc</span>=<span class="string">&quot;../草莓头像.png&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 根据DOM元素距离顶部的值来计算图片位置</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">lazy</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 获取图片列表，即img标签列表</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> imgs = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;img&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 视口高度 </span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> viewHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>; <span class="comment">// clientHeight是元素height + padding - 水平滚动条高度 (如果存在)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 图片滚动过的高度（页面顶部滚动到视口顶部的距离）</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> scrollHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span>; <span class="comment">// scrollTop元素内容顶部到视口可见内容顶部的距离</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; imgs.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// offsetTop当前元素相对于 body 元素的顶部内边距的距离</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> offsetHeight = imgs[i].<span class="property">offsetTop</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 滑动到图片位置时再将data-realsrc赋值给src，加载真实图片</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 图片顶部到body顶部距离&lt;视口高度+页面顶部垂直滚动到视口顶部的距离</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (offsetHeight &lt; viewHeight + scrollHeight) &#123; <span class="comment">// 说明滑动到图片位置了</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 使用dataset.xxx/getAttribute(&quot;data-xxx&quot;)获取自定义属性</span></span></span><br><span class="line"><span class="language-javascript">        imgs[i].<span class="property">src</span> = imgs[i].<span class="property">dataset</span>.<span class="property">realsrc</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript"><span class="comment">// onload是等所有的资源文件加载完毕以后再绑定事件</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">lazy</span>(imgs);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 滚屏函数</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">window</span>.<span class="property">onscroll</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">lazy</span>(imgs);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/clientHeight">Element.clientHeight</a>(只读属性)<strong>它是元素内部的高度，<code>CSS height + CSS padding - 水平滚动条高度 (如果存在)</code></strong><ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/innerHeight">Window.innerHeight</a>浏览器窗口的<strong>视口（viewport）高度</strong>（以像素为单位），<strong>与clientHeight区别是如果有水平滚动条，innerHeight也包括滚动条高度。</strong></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollTop">Element.scrollTop</a>获取或设置一个元素的内容垂直滚动的像素数。即，这个<strong>元素的内容顶部（卷起来的）</strong>到它的<strong>视口可见内容（的顶部）的距离</strong>的度量。当一个元素的内容没有产生垂直方向的滚动条，那么它的 scrollTop 值为0。<ul>
<li><a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/prop-document-documentelement.html">document.documentElement</a><strong>根元素（HTML文档就是HTML元素）</strong></li>
<li><strong>根元素的scrollTop即页面顶部垂直滚动到视口顶部的距离</strong></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/offsetHeight">HTMLElement.offsetHeight</a>(只读属性)它返回该元素的像素高度，高度**包含该元素的垂直内边距(padding)和边框(border)**，且是一个整数。</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/offsetTop">HTMLElement.offsetTop</a>(只读属性)它返回<strong>当前元素相对于其 offsetParent 元素的顶部内边距的距离</strong>。<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/offsetParent">offsetParent</a>最近的（指<strong>包含层级上的最近</strong>）包含该元素的<strong>定位元素</strong>或者<strong>最近的 table,td,th,body元素</strong>。</li>
</ul>
</li>
</ul>
<hr>
<h1 id="手写Promise加载2张图片"><a href="#手写Promise加载2张图片" class="headerlink" title="手写Promise加载2张图片"></a>手写Promise加载2张图片</h1><ul>
<li>可参考<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/02/06/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%882%EF%BC%89/#Promise%E5%8A%A0%E8%BD%BD2%E5%BC%A0%E5%9B%BE%E7%89%87%EF%BC%88%E8%A7%A3%E5%86%B3%E5%9B%9E%E8%B0%83%E5%9C%B0%E5%9F%9F%EF%BC%89">“JS基础知识面试题（2）”中“Promise加载2张图片（解决回调地域）”</a><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 加载2张图片，即使用Promise解决回调地域</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadImg</span>(<span class="params">src</span>) &#123;</span><br><span class="line">    const p = <span class="keyword">new</span> Promise(</span><br><span class="line">        <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            const img = document.createElement(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">            img.onload = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                resolve(img)</span><br><span class="line">            &#125;</span><br><span class="line">            img.onerror = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                const err = <span class="keyword">new</span> Error(<span class="string">`图片加载失败 <span class="subst">$&#123;src&#125;</span>`</span>)</span><br><span class="line">                reject(err)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 注意这里动态加载图片</span></span><br><span class="line">            img.src = src</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> p</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const url1 = <span class="string">&#x27;https://img.mukewang.com/5a9fc8070001a82402060220-140-140.jpg&#x27;</span></span><br><span class="line">const url2 = <span class="string">&#x27;https://img3.mukewang.com/5a9fc8070001a82402060220-100-100.jpg&#x27;</span></span><br><span class="line"></span><br><span class="line">loadImg(url1).then(<span class="function"><span class="params">img1</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(img1.width)</span><br><span class="line">    <span class="keyword">return</span> img1 <span class="comment">// 普通对象</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">img1</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(img1.height)</span><br><span class="line">    <span class="keyword">return</span> loadImg(url2) <span class="comment">// promise 实例</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">img2</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(img2.width)</span><br><span class="line">    <span class="keyword">return</span> img2</span><br><span class="line">&#125;).then(<span class="function"><span class="params">img2</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(img2.height)</span><br><span class="line">&#125;).<span class="keyword">catch</span>(<span class="function"><span class="params">ex</span> =&gt;</span> <span class="built_in">console</span>.error(ex))</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="async-await加载2张图片"><a href="#async-await加载2张图片" class="headerlink" title="async&#x2F;await加载2张图片"></a>async&#x2F;await加载2张图片</h2><ul>
<li>可参考<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/02/06/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%882%EF%BC%89/#async-await%E5%BD%BB%E5%BA%95%E8%A7%A3%E5%86%B3%E5%9B%9E%E8%B0%83%E5%9C%B0%E7%8B%B1">“JS基础知识面试题（2）”中“async&#x2F;await彻底解决回调地狱”</a></li>
<li>Promise then catch链式调用可解决回调地狱，但也是基于回调函数</li>
<li>彻底解决回调地狱，<strong>用同步的方式编写异步</strong>：<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 依旧是用loadImg()返回Promise实例</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadImg</span>(<span class="params">src</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> img = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">    img.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(img)</span><br><span class="line">    &#125;</span><br><span class="line">    img.<span class="property">onerror</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`图片加载失败 <span class="subst">$&#123;src&#125;</span>`</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    img.<span class="property">src</span> = src</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> promise</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：await 必须放在 async 函数中，否则会报错</span></span><br><span class="line">(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> src1 = <span class="string">&#x27;http://www.imooc.com/static/img/index/logo_new.png&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> src2 = <span class="string">&#x27;https://avatars3.githubusercontent.com/u/9583120&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 加载第一张图片</span></span><br><span class="line">    <span class="keyword">const</span> img1 = <span class="keyword">await</span> <span class="title function_">loadImg</span>(src1)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(img1.<span class="property">width</span>, img1.<span class="property">height</span>) <span class="comment">// 252,144</span></span><br><span class="line">    <span class="comment">// 加载第二张图片</span></span><br><span class="line">    <span class="keyword">const</span> img2 = <span class="keyword">await</span> <span class="title function_">loadImg</span>(src2)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(img2)</span><br><span class="line">    <span class="comment">// &lt;img src=&quot;https://avatars3.githubusercontent.com/u/9583120&quot;&gt;</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (ex) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(ex)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="创建10个a标签，点击的时候弹出来对应的序号"><a href="#创建10个a标签，点击的时候弹出来对应的序号" class="headerlink" title="创建10个a标签，点击的时候弹出来对应的序号"></a>创建10个a标签，点击的时候弹出来对应的序号</h1><ul>
<li><p>可参考<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/02/05/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%881%EF%BC%89/#%E5%88%9B%E5%BB%BA10%E4%B8%AAa%E6%A0%87%E7%AD%BE%EF%BC%8C%E7%82%B9%E5%87%BB%E6%97%B6%E5%BC%B9%E5%87%BA%E5%AF%B9%E5%BA%94%E7%9A%84%E5%BA%8F%E5%8F%B7">“JS基础知识面试题（1）”中“创建10个a标签，点击时弹出对应的序号”</a></p>
</li>
<li><p><strong>方法1：let</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">Fragment</span> = <span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>();</span><br><span class="line"><span class="comment">// 循环创建10个a标签</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">  a.<span class="property">innerHTML</span> = i + <span class="string">`&lt;br/&gt;`</span>;</span><br><span class="line">  <span class="comment">// 绑定事件函数</span></span><br><span class="line">  a.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">    <span class="title function_">alert</span>(i);</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 统一添加到Fragment中</span></span><br><span class="line">  <span class="title class_">Fragment</span>.<span class="title function_">appendChild</span>(a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Fragment添加到文档中</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(<span class="title class_">Fragment</span>);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>注意：</strong></p>
<ul>
<li><strong>Fragment的创建方法</strong>：<a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/met-document-createdocumentfragment.html"><code>document.createDocumentFragment()</code></a></li>
<li>a标签<strong>需要设置innerHTML</strong></li>
<li>添加到文档时<strong>别忘记body</strong>，<code>document.body.appendChild(Fragment)</code></li>
</ul>
</li>
<li><p><strong>方法2：使用闭包的持久性，注意重点不在匿名自执行函数，将i传进函数中作为 函数作用域 的变量</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Fragment</span> = <span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">  <span class="comment">// 注意：光是设置一个函数包裹，这个函数是不会执行的，需要自调用</span></span><br><span class="line">  (<span class="function">(<span class="params">i</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">    a.<span class="property">innerHTML</span> = i + <span class="string">`&lt;br/&gt;`</span>;</span><br><span class="line">    a.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      e.<span class="title function_">preventDefault</span>();</span><br><span class="line">      <span class="title function_">alert</span>(i);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title class_">Fragment</span>.<span class="title function_">appendChild</span>(a);</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(<span class="title class_">Fragment</span>);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>注意：</strong>for循环中光是设置一个箭头函数，这个函数是不会执行的，<strong>需要自调用</strong></p>
</li>
</ul>
<hr>
<h1 id="函数实现一秒钟输出一个数"><a href="#函数实现一秒钟输出一个数" class="headerlink" title="函数实现一秒钟输出一个数"></a>函数实现一秒钟输出一个数</h1><ul>
<li><strong>方法1：使用let块级作用域</strong><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(let i=<span class="number">0</span>;i&lt;=<span class="number">10</span>;i++)&#123;   <span class="comment">//用var打印的都是11</span></span><br><span class="line"> setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(i);</span><br><span class="line"> &#125;,<span class="number">1000</span>*i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>方法2：不用let的写法，原理是用 立即执行函数 创造一个 函数作用域 来 保存变量i</strong><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++)&#123;</span><br><span class="line">    (<span class="keyword">function</span> (<span class="params">i</span>) &#123;</span><br><span class="line">        setTimeout(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="built_in">console</span>.<span class="built_in">log</span>(i);</span><br><span class="line">        &#125;, <span class="number">1000</span> * i)</span><br><span class="line">    &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="手写图片轮播"><a href="#手写图片轮播" class="headerlink" title="手写图片轮播"></a>手写图片轮播</h1><ul>
<li>图示、完整的<strong>各个步骤</strong>流程等可看<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/04/16/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%EF%BC%881%EF%BC%89/#%E8%BD%AE%E6%92%AD%E5%9B%BE%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%8C%E5%90%8E%E5%8F%B0%E6%95%B0%E6%8D%AE%E6%8A%93%E5%8F%96%E6%98%AF%E6%80%8E%E4%B9%88%E5%86%99%E7%9A%84">“前端面试题目（1）”</a></li>
<li><strong>【大坑】：不要在css设置left，js获取会很麻烦，<code>parseFloat()</code>都转不成数字，只能得到NAN，去JS（<code>copyPic()</code>中）设置添加辅助图后的left来展示第一张图片</strong></li>
<li><strong>JS全思路：</strong><ul>
<li>使用<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/02/09/ES6%20class%EF%BC%881%EF%BC%89/">ES6 class</a>很重要！<strong>创建一个class Slider</strong>，这个<strong>类的作用</strong>就是<strong>获取轮播图的父盒子id然后给他内部的轮播图、小圆点、左右按钮添加js逻辑</strong>。在需要使用轮播图的文件中<strong>使用Slider类来new一个对象</strong>，同时将Slider需要的DOM元素（轮播图的父盒子）的<strong>id传过去</strong>，相对应的逻辑就绑上去了</li>
<li>在类的定义中，<strong>动态添加圆点（<code>initPoint()</code>）</strong><ul>
<li><strong>注意：用<a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/met-document-createdocumentfragment.html"><code>createDocumentFragment</code></a>减少DOM操作。<a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/prop-element-children.html">DOM children 属性</a>的length是子元素数量，<code>element.children[num]</code>可获取某一子元素</strong></li>
</ul>
</li>
<li><strong>ul头尾增加头尾辅助图</strong>(<code>copyPic()</code>)，<strong>每次移动后判断图片位置</strong>（ul绝对定位的left），<strong>头&#x2F;尾辅助图处于显示框中时</strong>通过设置ul的left迅速整条移动<strong>替换为期望的 真头图&#x2F;尾图 位置</strong>，实现**<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/04/16/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE%EF%BC%881%EF%BC%89/#%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%8F%AF%E6%97%A0%E9%99%90%E6%BB%9A%E5%8A%A8">图片无限滚动</a><strong>，<code>copyPic()</code>添加首尾辅助图，</strong><code>move()</code>将辅助图位置替换为真实对应图片的位置**<ul>
<li><strong>【重点！比如：ul到首图前的辅助图（假尾图）时，要设置left负数，整体左移到尾图】</strong></li>
</ul>
</li>
<li><strong>触发轮播图时的移动效果</strong>统一提取到函数<code>move()</code>，<strong>点击左右按钮&#x2F;点击圆点时调用</strong> <code>move()</code></li>
<li><code>leftRight()</code>实现<strong>左右按钮点击跳转</strong>，左右点击时控制 <strong>当前小圆点索引<code>this.index</code>的值的加减</strong>，方便<code>move(offset)</code>中<strong>控制圆点样式的变化</strong>，<code>animate()</code>实现带动画的移动</li>
<li><code>play()</code> <strong>自动播放，即setInterval()定时器点击右边按钮</strong>，<code>mouseenter</code>时删除定时器使鼠标移入时停止继续播放，<code>mouseleave</code>时重新创建定时器（保存在<code>this.auto</code>中，方便下次清除定时器）</li>
<li><strong>点击圆点跳转图片：</strong> <code>initPoint()</code>中添加，根据图片属性<code>data-index</code>和当前圆点索引<code>this.index</code>计算所需位移<code>offset</code>，调用<code>move()</code>进行跳转<ul>
<li>跳转前记得改 当前小圆点索引<code>this.index</code>，以此方便<code>move()</code>中获取index改变小圆点样式</li>
<li>注意下，圆点绑定<strong>click事件中<code>e.target</code>是当前的DOM元素</strong></li>
</ul>
</li>
</ul>
</li>
<li><strong>HTML重点：</strong><ul>
<li>单张图放入li中，所有图合为ul，ul外用div做单张图大小的div框（slider）。</li>
<li>箭头写在span中，放在div（left-box）中。</li>
<li>小圆点都放li中，ol为一排圆点，div（index-box）包裹ol。</li>
</ul>
</li>
<li><strong>CSS重点：</strong><ul>
<li><strong>总结：</strong>显示的<strong>图片框</strong>（相对定位）内部<strong>各个块</strong>（绝对定位）通过子绝父相来进行<strong>定位</strong>，每个<strong>小块内部</strong>通过<strong>flex布局</strong>来进行<strong>（箭头）居中&#x2F;（小圆点）均匀分布</strong>。图片条ul（绝对定位），通过left的更改进行滑动。</li>
<li><strong>li设为float</strong>，使<strong>所有li并排</strong>且<strong>单个移动</strong>时跟随兄弟元素<strong>一起移动</strong>。（<strong>ul的父元素slider（div）</strong>宽度为<strong>单张图片宽度</strong>，**ul宽度设为500%**）</li>
<li><strong>子绝父相</strong>（子为ul元素，父为<strong>显示在页面上</strong>的ul的父元素slider（div））,注意<strong>ul的父元素slider（div）</strong>使用<code>overflow：hidden</code><strong>隐藏横向滚动条</strong>，图片浮动为一排通过left移动</li>
<li><strong>绝对定位使箭头（left-box）处于图片 框的左&#x2F;右位置，left-box内flex布局使箭头在left-box内居中显示：</strong><ul>
<li>左<strong>箭头</strong>（span）的父元素（left-box）设为flex，轻松使<strong>箭头在父元素（left-box）中居中显示</strong>。箭头的父元素（left-box）absolute，slider框relative，<strong>箭头的父元素（left-box）在轮播图框（slider）中靠左显示</strong>。右箭头同理。</li>
</ul>
</li>
<li>ol的父元素（index-box）通过<strong>绝对定位</strong>固定在slider（div）的底部位置，<strong>小圆点（li）的父元素ol设为flex，默认把子项排在同一行。<code>justify-content: space-evenly;</code>使视觉上看任意两个子项之间的间距（以及到边缘的间距）相等</strong>（<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2019/11/20/%E7%99%BE%E5%BA%A6%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E5%AD%A6%E9%99%A2%20%E7%AC%AC%E4%B8%83%E5%A4%A9%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20%EF%BC%88CSS%20flexbox%EF%BC%89/#justify-content%E5%AE%9A%E4%B9%89%E5%AD%90%E9%A1%B9%E6%B2%BF%E4%B8%BB%E8%BD%B4%E7%9A%84%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F">space-around视觉上看不均匀</a>）。li设置<code>cursor: pointer;</code>，使用<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2019/10/09/%E7%99%BE%E5%BA%A6%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E5%AD%A6%E9%99%A2%20%E7%AC%AC%E5%9B%9B%E5%A4%A9%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%882%EF%BC%89/#%E5%88%97%E8%A1%A8%E7%AE%80%E5%86%99list-style">list-style: none;</a><strong>取消列表项目符号</strong></li>
</ul>
</li>
<li><strong>JS部分重点：</strong><ul>
<li><strong>创建Slider类（<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/02/09/ES6%20class%EF%BC%881%EF%BC%89/">ES6 class</a>）：</strong> 在该类构造函数中<strong>接收轮播图的父盒子id</strong>，以便接下来在类中<strong>给他内部的轮播图、小圆点、左右按钮添加js逻辑</strong></li>
<li><strong>使用Slider类：</strong> 在需要使用轮播图的文件中<strong>使用Slider类来new一个对象</strong>，同时将<strong>Slider需要的DOM元素</strong>（轮播图的父盒子）的<strong>id传进去</strong>，<strong>相对应的逻辑就绑上去了</strong>。<ul>
<li>这样可以在js中<strong>通过同一个类创建多个不同的轮播图对象</strong></li>
</ul>
</li>
<li><strong>类的 构造函数中 要调用class中自定义的相关函数（比如动态添加小圆点、自动播放的函数等待）！</strong>因为创建对象时会执行构造函数，所以在构造函数内调用的函数将会被执行。</li>
<li><strong>注意：类中自定义函数不需要function。需要频繁调用的DOM元素可以放到构造函数中一次性获取后挂在this上，后面通过<code>this.xxx</code>调用DOM元素。</strong></li>
<li><strong>无限滚动的实现：</strong> <strong>ul首尾加辅助图</strong>，通过<strong>ul的left</strong>来<strong>判断目前是否处于辅助图位置</strong>，如抵达辅助图位置，则通过<strong>改变ul的left</strong>使其迅速<strong>移动到辅助图对应的真实图片位置上</strong></li>
</ul>
</li>
<li><strong>CSS：</strong><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.slider-box</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/*slider做轮播图显示框，与单张图等宽高，5张图并排，overflow隐藏溢出部分*/</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.slider-box</span> <span class="selector-class">.slider</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/*ul为全部图组成的横排，从第2张图开始显示*/</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.slider-box</span> <span class="selector-class">.slider</span> <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 去掉ul自带的padding */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* absolute可产生BFC，不用另外清除浮动 */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 【不要在css设置left，js获取会NAN，去JS设置添加辅助图后的left】无限滚动 */</span></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* left: -500px; */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">500%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/*所有图片的宽度和*/</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* transition: left 1s linear; */</span></span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/*每张图都放在1个li里，横排显示*/</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.slider-box</span> <span class="selector-class">.slider</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/*浮动以显示在一排，且父元素left移动时会全部一起动*/</span></span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 左箭头 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.slider-box</span> <span class="selector-class">.left-box</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: <span class="number">45%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">left</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/*flex容器可使子元素轻松居中*/</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/*水平居中*/</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/*垂直居中*/</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/*右箭头*/</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.slider-box</span> <span class="selector-class">.right-box</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: <span class="number">45%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">right</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.slider-box</span> <span class="selector-class">.left-box</span>,</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.slider-box</span> <span class="selector-class">.right-box</span> <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/*小圆点索引*/</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.slider-box</span> <span class="selector-class">.index-box</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">bottom</span>: <span class="number">1%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.slider-box</span> <span class="selector-class">.index-box</span>&gt;<span class="selector-tag">ol</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* flex默认把子项排在同一行 */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* evenly：均匀地。任意两个子项之间的间距（以及到边缘的间距）相等 */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: space-evenly;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.slider-box</span> <span class="selector-class">.index-box</span>&gt;<span class="selector-tag">ol</span>&gt;<span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* list-style取消列表项目符号 */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 当前图片的圆点样式 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.slider-box</span> <span class="selector-class">.index-box</span>&gt;<span class="selector-tag">ol</span>&gt;<span class="selector-tag">li</span><span class="selector-class">.active</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#e1251b</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><strong>HTML：</strong><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slider-box&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- slider做一个框，和单张图等宽等高，overflow隐藏溢出部分 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 子绝父相，slider相对定位，ul绝对定位，调整ul的left使其移动--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slider&quot;</span> <span class="attr">id</span>=<span class="string">&quot;slider&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ul宽是所有图的宽，内部li浮动来一排显示--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../醒醒头像.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../草莓头像.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../胡萝卜头像.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 左箭头，绝对定位，left-box设置为flex容器，实现span水平垂直居中--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left-box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="symbol">&amp;lt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 右箭头，同上中--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right-box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="symbol">&amp;gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 小圆点索引，绝对定位，通过js根据图片数量决定圆点数量--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><strong>JS：</strong><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">Slider</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(id) &#123;</span><br><span class="line">      <span class="comment">// 需要频繁调用的DOM元素可在构造函数中一次性获取</span></span><br><span class="line">      <span class="keyword">this</span>.box = document.querySelector(id) <span class="comment">// 轮播图盒子</span></span><br><span class="line">      <span class="keyword">this</span>.picBox = <span class="keyword">this</span>.box.querySelector(<span class="string">&quot;ul&quot;</span>) <span class="comment">// 图片盒子</span></span><br><span class="line">      <span class="keyword">this</span>.indexBox = <span class="keyword">this</span>.box.querySelector(<span class="string">&quot;.index-box&quot;</span>) <span class="comment">// 小圆点父盒子</span></span><br><span class="line">      <span class="comment">// clientWidth元素内部宽度，包括 padding，不包括 border、 margin 和垂直滚动条（如果有的话）</span></span><br><span class="line">      <span class="keyword">this</span>.sliderWidth = <span class="keyword">this</span>.box.clientWidth <span class="comment">// 整个轮播图的宽度sliderWidth</span></span><br><span class="line">      <span class="keyword">this</span>.sliders = <span class="keyword">this</span>.picBox.children.length; <span class="comment">// 轮播图数量，这里是3，还没加首尾辅助图</span></span><br><span class="line">      <span class="keyword">this</span>.index = <span class="number">1</span> <span class="comment">// 小圆点的索引，初始为1</span></span><br><span class="line">      <span class="keyword">this</span>.auto = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.<span class="keyword">init</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">      <span class="keyword">this</span>.initPoint() <span class="comment">// 动态添加小圆点，点击圆点跳转对应图片</span></span><br><span class="line">      <span class="keyword">this</span>.copyPic() <span class="comment">// 增加辅助图，实现无限滚动</span></span><br><span class="line">      <span class="keyword">this</span>.leftRight() <span class="comment">// 左右按钮</span></span><br><span class="line">      <span class="keyword">this</span>.play() <span class="comment">// 自动播放</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 动态添加小圆点</span></span><br><span class="line">    initPoint() &#123;</span><br><span class="line">      <span class="comment">// 图片的数量就是圆点的数量</span></span><br><span class="line">      <span class="keyword">const</span> num = <span class="keyword">this</span>.picBox.children.length;</span><br><span class="line">      <span class="comment">// 减少DOM操作（Fragment）</span></span><br><span class="line">      let frg = document.createDocumentFragment();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (let i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">        let li = document.createElement(<span class="string">&quot;li&quot;</span>)</span><br><span class="line">        <span class="comment">// 提前给圆点设置属性data-index，用于点击跳转</span></span><br><span class="line">        li.setAttribute(<span class="string">&quot;data-index&quot;</span>, i + <span class="number">1</span>)</span><br><span class="line">        <span class="comment">// 给当前图的小圆点特殊样式，默认第一张图</span></span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">0</span>) li.className = <span class="string">&quot;active&quot;</span></span><br><span class="line">        frg.appendChild(li)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 动态设置 圆点框 的总宽度，设置的是indexBox的 子元素ol 的宽度</span></span><br><span class="line">      <span class="keyword">this</span>.indexBox.children[<span class="number">0</span>].style.width = num * <span class="number">10</span> * <span class="number">2</span> + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">      <span class="comment">// 一次性添加到小圆点父盒子中</span></span><br><span class="line">      <span class="keyword">this</span>.indexBox.children[<span class="number">0</span>].appendChild(frg)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 点击圆点，跳转对应图片</span></span><br><span class="line">      <span class="keyword">this</span>.indexBox.children[<span class="number">0</span>].addEventListener(<span class="string">&quot;click&quot;</span>, (e) =&gt; &#123;</span><br><span class="line">        console.log(<span class="string">&quot;point&quot;</span>)</span><br><span class="line">        <span class="comment">// 获取当前点击的DOM元素的data-index属性值</span></span><br><span class="line">        let pointIndex = (e.target).getAttribute(<span class="string">&quot;data-index&quot;</span>)</span><br><span class="line">        <span class="comment">// index是构造函数中定义并初始为1的当前小圆点索引</span></span><br><span class="line">        <span class="keyword">if</span> (pointIndex == <span class="keyword">this</span>.index) &#123;</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 跳转相应图片，offset为移动距离</span></span><br><span class="line">        <span class="comment">// index为当前小圆点索引（构造函数中定义初始为1）</span></span><br><span class="line">        <span class="comment">// sliderWidth为轮播图的宽度</span></span><br><span class="line">        let offset = (pointIndex - <span class="keyword">this</span>.index) * <span class="keyword">this</span>.sliderWidth</span><br><span class="line">        <span class="comment">// 跳转前记得改当前小圆点索引index，以此方便move()中获取index改变小圆点样式</span></span><br><span class="line">        <span class="keyword">this</span>.index = pointIndex</span><br><span class="line">        <span class="keyword">this</span>.move(offset) <span class="comment">// 调用move()移动图片</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ul头尾增加辅助图，这是实现无限滚动的前提，在move()中将辅助图更换为真正的相应图片</span></span><br><span class="line">    copyPic() &#123;</span><br><span class="line">      <span class="comment">// 复制 图1节点 给first（第一张图）</span></span><br><span class="line">      <span class="keyword">const</span> first = <span class="keyword">this</span>.picBox.firstElementChild.cloneNode(<span class="literal">true</span>)</span><br><span class="line">      <span class="comment">// 复制 最后一张图的节点 给last（最后一张图）</span></span><br><span class="line">      <span class="keyword">const</span> last = <span class="keyword">this</span>.picBox.lastElementChild.cloneNode(<span class="literal">true</span>)</span><br><span class="line">      <span class="comment">// 在 ul尾部 增加 辅助图（第一张图）</span></span><br><span class="line">      <span class="keyword">this</span>.picBox.appendChild(first)</span><br><span class="line">      <span class="comment">// 在 ul首部元素前 增加 辅助图（最后一张图）</span></span><br><span class="line">      <span class="keyword">this</span>.picBox.insertBefore(last, <span class="keyword">this</span>.picBox.firstElementChild) <span class="comment">// 把参数1加在参数2前面</span></span><br><span class="line">      <span class="comment">// 增加后首先显示的是 辅助图（最后一张图） ，需要改成首先显示图1</span></span><br><span class="line">      <span class="comment">// 注意：图片数量增多，图片容器ul总宽度也要增加</span></span><br><span class="line">      <span class="keyword">this</span>.picBox.style.width = <span class="keyword">this</span>.sliderWidth * <span class="keyword">this</span>.picBox.children.length + <span class="string">&quot;px&quot;</span></span><br><span class="line">      <span class="comment">// ！！千万别在css中设置，否则js里获取left值转数字会很烦，一直NAN！！</span></span><br><span class="line">      <span class="keyword">this</span>.picBox.style.left = -<span class="number">1</span> * <span class="keyword">this</span>.sliderWidth + <span class="string">&quot;px&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 【点击左右按钮/点击圆点都会用到move()】</span></span><br><span class="line">    <span class="comment">// 触发轮播图的移动效果，如到辅助图则替换为真正的图，改变圆点样式，offset是位移</span></span><br><span class="line">    move(offset) &#123;</span><br><span class="line">      <span class="comment">// 移动ul改变当前显示图片</span></span><br><span class="line">      <span class="comment">// 注意：left是带单位的(字符串)，parseFloat转为数字</span></span><br><span class="line">      <span class="keyword">this</span>.picBox.style.left = parseFloat(<span class="keyword">this</span>.picBox.style.left) + offset + <span class="string">&quot;px&quot;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// 如到辅助图则替换为真正的图【重点看】</span></span><br><span class="line">      <span class="keyword">if</span> (parseFloat(<span class="keyword">this</span>.picBox.style.left) == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 去真正的尾图，即ul向左移动到图3的位置</span></span><br><span class="line">        <span class="comment">// sliders，3，轮播图数量；sliderWidth，轮播图框宽度</span></span><br><span class="line">        <span class="keyword">this</span>.picBox.style.left = -<span class="keyword">this</span>.sliders * <span class="keyword">this</span>.sliderWidth + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (parseFloat(<span class="keyword">this</span>.picBox.style.left) == -(<span class="keyword">this</span>.sliders + <span class="number">1</span>) * <span class="keyword">this</span>.sliderWidth) &#123;</span><br><span class="line">        <span class="comment">// 去真正的首图</span></span><br><span class="line">        <span class="keyword">this</span>.picBox.style.left = -<span class="keyword">this</span>.sliderWidth + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 给当前圆点加特殊样式，其他圆点抹掉样式，圆点数量num</span></span><br><span class="line">      <span class="keyword">const</span> num = <span class="keyword">this</span>.indexBox.children[<span class="number">0</span>].children.length</span><br><span class="line">      <span class="keyword">for</span> (let i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">        <span class="keyword">this</span>.indexBox.children[<span class="number">0</span>].children[i].className = <span class="string">&quot;&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// this.index，小圆点的索引，初始为1，在leftRight()中控制加减</span></span><br><span class="line">      <span class="keyword">this</span>.indexBox.children[<span class="number">0</span>].children[<span class="keyword">this</span>.index - <span class="number">1</span>].className = <span class="string">&quot;active&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 点击左右按钮可切换图片</span></span><br><span class="line">    leftRight() &#123;</span><br><span class="line">      <span class="comment">// 选中左侧按钮</span></span><br><span class="line">      <span class="keyword">this</span>.box.querySelector(<span class="string">&quot;.left-box&quot;</span>).addEventListener(<span class="string">&quot;click&quot;</span>, () =&gt; &#123;</span><br><span class="line">        console.log(<span class="string">&quot;left&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// index为当前小圆点索引（初始图1为1），sliders为图片数量5</span></span><br><span class="line">        <span class="comment">// 如列表溢出则重置，连续点击出现空白图时为溢出</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.index - <span class="number">1</span> &lt; <span class="number">1</span>) &#123;</span><br><span class="line">          <span class="comment">// 当前位置左移1位却小于1时，index重置为5</span></span><br><span class="line">          <span class="keyword">this</span>.index = <span class="keyword">this</span>.sliders</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// 正常则当前图片索引index减1</span></span><br><span class="line">          <span class="keyword">this</span>.index--</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用move()移动轮播图,移动位移为 负 轮播图宽度</span></span><br><span class="line">        <span class="keyword">this</span>.move(-<span class="keyword">this</span>.sliderWidth)</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 选中右侧按钮</span></span><br><span class="line">      <span class="keyword">this</span>.box.querySelector(<span class="string">&quot;.right-box&quot;</span>).addEventListener(<span class="string">&quot;click&quot;</span>, () =&gt; &#123;</span><br><span class="line">        console.log(<span class="string">&quot;right&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 同理，当前位置+1超出总轮播图数量时，重置index为1</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.index + <span class="number">1</span> &gt; <span class="keyword">this</span>.sliders) &#123;</span><br><span class="line">          <span class="keyword">this</span>.index = <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.index++</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.move(<span class="keyword">this</span>.sliderWidth)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自动播放</span></span><br><span class="line">    play() &#123;</span><br><span class="line">      <span class="comment">// 每隔2秒点击一次“向右”按钮</span></span><br><span class="line">      <span class="keyword">this</span>.auto = setInterval(() =&gt; &#123;</span><br><span class="line">        <span class="keyword">this</span>.box.querySelector(<span class="string">&quot;.right-box&quot;</span>).click()</span><br><span class="line">      &#125;, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 鼠标进入 轮播图盒子 时，清除定时器</span></span><br><span class="line">      <span class="keyword">this</span>.box.addEventListener(<span class="string">&quot;mouseenter&quot;</span>, () =&gt; &#123;</span><br><span class="line">        clearInterval(<span class="keyword">this</span>.auto)</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 鼠标移出 轮播图盒子 时，继续执行定时器</span></span><br><span class="line">      <span class="keyword">this</span>.box.addEventListener(<span class="string">&quot;mouseleave&quot;</span>, () =&gt; &#123;</span><br><span class="line">        <span class="keyword">this</span>.auto = setInterval(() =&gt; &#123;</span><br><span class="line">          <span class="keyword">this</span>.box.querySelector(<span class="string">&quot;.right-box&quot;</span>).click()</span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 传入的是Slider类构造函数中需要的轮播图父元素的id</span></span><br><span class="line">  <span class="keyword">const</span> slider = new Slider(<span class="string">&quot;#slider&quot;</span>);</span><br><span class="line">  <span class="comment">// 那么绑定在Slider类构造函数中的属性、函数都会被引入</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="点击列表，输出对应的索引"><a href="#点击列表，输出对应的索引" class="headerlink" title="点击列表，输出对应的索引"></a>点击列表，输出对应的索引</h1><ul>
<li><strong>易忘点：</strong><ul>
<li><code>document.createDocumentFragment()</code>创建Fragment</li>
<li><code>document.createElement(&#39;a&#39;)</code>创建新标签</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> list = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;list&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> fragment = <span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>();</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 循环创建li，放入fragment，fragment放入ol</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123; <span class="comment">// 注意从1开始而不是0，毕竟最后输出索引是从1开始</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> li = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    li.<span class="property">innerHTML</span> = <span class="string">&quot;选项&quot;</span> + i;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 绑定click事件</span></span></span><br><span class="line"><span class="language-javascript">    li.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">alert</span>(i);</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    fragment.<span class="title function_">appendChild</span>(li);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  list.<span class="title function_">appendChild</span>(fragment);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="手写jsonp【没看】"><a href="#手写jsonp【没看】" class="headerlink" title="手写jsonp【没看】"></a>手写jsonp【没看】</h1><ul>
<li>jsonp是浏览器同源策略导致的<strong>跨域问题的一种解决策略</strong>。</li>
<li><strong>原理：</strong><code>&lt;script&gt;</code>在<strong>请求资源时可绕过跨域限制</strong>，所以script中<strong>src地址</strong>可以是<strong>跨域地址服务器</strong>，可以任意<strong>动态拼接数据返回</strong>(符合js格式要求即可)。所以，<code>&lt;script&gt;</code>就可以获得跨域的数据，<strong>只要服务端愿意返回</strong>。具体<strong>例子</strong>可参考<a target="_blank" rel="noopener" href="https://huanglizhu.github.io/2020/03/01/JS%20Web%20API%20AJAX/#jsonp">JS Web API AJAX</a></li>
<li><strong>注意</strong>：jsonp <strong>只能发起GET请求</strong>且<strong>需要服务的支持</strong></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/141809274">代码参考</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/JavaScript%E5%AD%A6%E4%B9%A0/">JavaScript学习</a>, <a class="article-category-link" href="/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/">面试题</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/" rel="tag">JS</a></li></ul>

      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>



      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/07/21/%E8%AD%A6%E9%86%92%EF%BC%81%E6%85%8E%E7%94%A8%60+%60%E4%B8%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AF%B9%E8%B1%A1/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          警醒！慎用`+`与字符串和对象
        
      </div>
    </a>
  
  
    <a href="/2020/07/04/JS%20%E7%AA%81%E7%84%B6%E6%83%B3%E8%B5%B7%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9%E6%B1%87%E6%80%BB/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">JS 突然想起的知识点汇总</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
      <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E7%BB%84"><span class="nav-number">1.</span> <span class="nav-text">数组</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E5%8E%BB0%EF%BC%882%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%89"><span class="nav-number">1.1.</span> <span class="nav-text">数组去0（2种方法）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D"><span class="nav-number">1.2.</span> <span class="nav-text">数组去重</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ES6-Set"><span class="nav-number">1.2.1.</span> <span class="nav-text">ES6 Set</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E5%88%9B%E5%BB%BA%E6%96%B0%E6%95%B0%E7%BB%84"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">不创建新数组</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JS-%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95"><span class="nav-number">1.2.2.</span> <span class="nav-text">JS 三种方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E6%8E%92%E5%BA%8F"><span class="nav-number">1.3.</span> <span class="nav-text">数组排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E6%89%81%E5%B9%B3%E5%8C%96%EF%BC%882%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%89"><span class="nav-number">1.4.</span> <span class="nav-text">数组扁平化（2种方法）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%8B%E5%86%99%E6%95%B0%E7%BB%84%E7%9A%84map"><span class="nav-number">1.5.</span> <span class="nav-text">手写数组的map()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%8B%E5%86%99forEach"><span class="nav-number">1.6.</span> <span class="nav-text">手写forEach()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%8B%E5%86%99%E6%95%B0%E7%BB%84%E7%9A%84reduce-%E3%80%90%E9%87%8D%E7%82%B9%E3%80%91"><span class="nav-number">1.7.</span> <span class="nav-text">手写数组的reduce()【重点】</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%8B%E5%86%99%E9%80%9A%E7%94%A8%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="nav-number">2.</span> <span class="nav-text">手写通用深拷贝</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AF%BB%E4%BB%A3%E7%A0%81%E5%86%99%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="nav-number">3.</span> <span class="nav-text">读代码写输出结果</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AE%80%E8%BF%B0call-apply-bind%E5%8C%BA%E5%88%AB"><span class="nav-number">4.</span> <span class="nav-text">简述call,apply,bind区别</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%8B%E5%86%99call"><span class="nav-number">4.1.</span> <span class="nav-text">手写call()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%8B%E5%86%99apply"><span class="nav-number">4.2.</span> <span class="nav-text">手写apply()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%8B%E5%86%99bind"><span class="nav-number">4.3.</span> <span class="nav-text">手写bind()</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#instanceof%E3%80%90%E9%87%8D%E7%82%B9%E5%A4%8D%E4%B9%A0%E3%80%91"><span class="nav-number">5.</span> <span class="nav-text">instanceof【重点复习】</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#new%E3%80%90%E9%87%8D%E7%82%B9%E5%A4%8D%E4%B9%A0%E3%80%91"><span class="nav-number">6.</span> <span class="nav-text">new【重点复习】</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81"><span class="nav-number">7.</span> <span class="nav-text">防抖和节流</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%98%B2%E6%8A%96%E3%80%90%E9%87%8D%E7%82%B9%E5%A4%8D%E4%B9%A0%E3%80%91%E3%80%90%E5%87%BD%E6%95%B0%E5%86%85%E8%BF%94%E5%9B%9E%E5%87%BD%E6%95%B0%EF%BC%8C%E6%89%8D%E8%83%BD%E8%B0%83%E7%94%A8-debounce-%EF%BC%8C%E5%AF%B9%E6%AF%94%E2%80%9CJS-%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E2%80%9D%E4%B8%AD%E2%80%9C%E8%8A%82%E6%B5%81%E2%80%9D%E5%9C%A8-%E6%99%AE%E9%80%9A%E4%BA%8B%E4%BB%B6%E5%87%BD%E6%95%B0%E4%B8%AD-%E7%9A%84%E4%BB%A3%E7%A0%81%E5%92%8C-%E5%B0%81%E8%A3%85-%E5%90%8E%E7%9A%84%E4%BB%A3%E7%A0%81%E5%8C%BA%E5%88%AB%EF%BC%8C%E6%80%9D%E8%80%83%E4%B8%BA%E5%95%A5%E3%80%91"><span class="nav-number">7.1.</span> <span class="nav-text">防抖【重点复习】【函数内返回函数，才能调用 debounce()，对比“JS 运行环境”中“节流”在 普通事件函数中 的代码和 封装 后的代码区别，思考为啥】</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8A%82%E6%B5%81%E3%80%90%E9%87%8D%E7%82%B9%E5%A4%8D%E4%B9%A0%E3%80%91"><span class="nav-number">7.2.</span> <span class="nav-text">节流【重点复习】</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%8B%E5%86%99ajax"><span class="nav-number">8.</span> <span class="nav-text">手写ajax</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%94%A8-setTimeout-%E5%AE%9E%E7%8E%B0-setInterval"><span class="nav-number">9.</span> <span class="nav-text">用 setTimeout 实现 setInterval</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="nav-number">10.</span> <span class="nav-text">图片懒加载</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%8B%E5%86%99Promise%E5%8A%A0%E8%BD%BD2%E5%BC%A0%E5%9B%BE%E7%89%87"><span class="nav-number">11.</span> <span class="nav-text">手写Promise加载2张图片</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#async-await%E5%8A%A0%E8%BD%BD2%E5%BC%A0%E5%9B%BE%E7%89%87"><span class="nav-number">11.1.</span> <span class="nav-text">async&#x2F;await加载2张图片</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA10%E4%B8%AAa%E6%A0%87%E7%AD%BE%EF%BC%8C%E7%82%B9%E5%87%BB%E7%9A%84%E6%97%B6%E5%80%99%E5%BC%B9%E5%87%BA%E6%9D%A5%E5%AF%B9%E5%BA%94%E7%9A%84%E5%BA%8F%E5%8F%B7"><span class="nav-number">12.</span> <span class="nav-text">创建10个a标签，点击的时候弹出来对应的序号</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%AE%9E%E7%8E%B0%E4%B8%80%E7%A7%92%E9%92%9F%E8%BE%93%E5%87%BA%E4%B8%80%E4%B8%AA%E6%95%B0"><span class="nav-number">13.</span> <span class="nav-text">函数实现一秒钟输出一个数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%8B%E5%86%99%E5%9B%BE%E7%89%87%E8%BD%AE%E6%92%AD"><span class="nav-number">14.</span> <span class="nav-text">手写图片轮播</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%82%B9%E5%87%BB%E5%88%97%E8%A1%A8%EF%BC%8C%E8%BE%93%E5%87%BA%E5%AF%B9%E5%BA%94%E7%9A%84%E7%B4%A2%E5%BC%95"><span class="nav-number">15.</span> <span class="nav-text">点击列表，输出对应的索引</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%8B%E5%86%99jsonp%E3%80%90%E6%B2%A1%E7%9C%8B%E3%80%91"><span class="nav-number">16.</span> <span class="nav-text">手写jsonp【没看】</span></a></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/categories" class="mobile-nav-link">分类</a>
  
    <a href="/tags" class="mobile-nav-link">标签</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
    

                <div class="clearfix container">
                    <div class="site-info">
                        &copy;
                        2024
                            珠 All Rights Reserved.
                                
                                    <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次 本站总访问量
                                    <span id="busuanzi_value_site_pv"></span>次
                                    </span>
                                    
                    </div>
                    <div class="site-credit">
                        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
                    </div>
                </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<script src="/js/bootstrap.js"></script>


<script src="/js/main.js"></script>








  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
    </script>
    




  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
