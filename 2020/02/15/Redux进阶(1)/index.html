<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>Redux进阶(1) | 珠</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="前端,程序员,软件开发,面试,CSS,JavaScript,JS,ES6,HTML,Node.js,React,Vue">
  
  
  
  
  <meta name="description" content="UI组件和容器组件 我们让 UI组件 负责页面的渲染，让 容器组件 负责页面的逻辑 当然有时候让 UI组件 负责一点点逻辑也是可以的。 当 UI组件 只负责页面渲染时，它实际只有一个render函数，那么此时我们可以使用无状态组件代替它以提高性能。  分离UI组件TodoListUI在src下新建TodoListUI.js文件,将TodoList.js的render函数内页面渲染相关的内容都剪切过">
<meta name="keywords" content="React.js">
<meta property="og:type" content="article">
<meta property="og:title" content="Redux进阶(1)">
<meta property="og:url" content="http://yoursite.com/2020/02/15/Redux进阶(1)/index.html">
<meta property="og:site_name" content="珠">
<meta property="og:description" content="UI组件和容器组件 我们让 UI组件 负责页面的渲染，让 容器组件 负责页面的逻辑 当然有时候让 UI组件 负责一点点逻辑也是可以的。 当 UI组件 只负责页面渲染时，它实际只有一个render函数，那么此时我们可以使用无状态组件代替它以提高性能。  分离UI组件TodoListUI在src下新建TodoListUI.js文件,将TodoList.js的render函数内页面渲染相关的内容都剪切过">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/005H7IVsgy1gbwx1asqc7j30uc0b0q47.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/005H7IVsgy1gbwx45dw70j30i70gx0ts.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/005H7IVsgy1gbwx4vgy4pj31170d1dgf.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/005H7IVsgy1gbwx6yy04cj30mr0f50u8.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/005H7IVsgy1gbwxc8bawnj317h05w75l.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/005H7IVsgy1gbwydf1mb7j30h8096wem.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/005H7IVsgy1gc5knu092cj30v70a0gn4.jpg">
<meta property="og:updated_time" content="2020-02-23T08:29:24.154Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Redux进阶(1)">
<meta name="twitter:description" content="UI组件和容器组件 我们让 UI组件 负责页面的渲染，让 容器组件 负责页面的逻辑 当然有时候让 UI组件 负责一点点逻辑也是可以的。 当 UI组件 只负责页面渲染时，它实际只有一个render函数，那么此时我们可以使用无状态组件代替它以提高性能。  分离UI组件TodoListUI在src下新建TodoListUI.js文件,将TodoList.js的render函数内页面渲染相关的内容都剪切过">
<meta name="twitter:image" content="http://ww1.sinaimg.cn/large/005H7IVsgy1gbwx1asqc7j30uc0b0q47.jpg">
  
    <link rel="alternate" href="/atom.xml" title="珠" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/sx.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css">
  <link rel="stylesheet" href="/css/fashion.css">
  <link rel="stylesheet" href="/css/glyphs.css">

</head>
</html>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  


        <header id="allheader" class="site-header" role="banner"  >
                <div class="clearfix container">
                    <div class="site-branding">

                        <h1 class="site-title">
                            
                                    <a href="/" title="珠" rel="home">
                                        珠
                                    </a>
                                    
                        </h1>

                        
                            <div class="site-description">
                                Record every bit of front-end learning.
                            </div>
                            

                                <nav id="main-navigation" class="main-navigation" role="navigation">
                                    <a class="nav-open">Menu</a>
                                    <a class="nav-close">Close</a>

                                    <div class="clearfix sf-menu">
                                        <ul id="main-nav" class="menu sf-js-enabled sf-arrows" style="touch-action: pan-y;">
                                            
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/">
                                                        主页
                                                    </a>
                                                </li>
                                                
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/archives">
                                                        归档
                                                    </a>
                                                </li>
                                                
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/categories">
                                                        分类
                                                    </a>
                                                </li>
                                                
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/tags">
                                                        标签
                                                    </a>
                                                </li>
                                                
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/about">
                                                        关于
                                                    </a>
                                                </li>
                                                
                                        </ul>
                                    </div>
                                </nav>

                    </div>
                </div>
        </header>

  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-Redux进阶(1)" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      Redux进阶(1)
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2020/02/15/Redux进阶(1)/" class="article-date">
	  <time datetime="2020-02-15T09:04:20.000Z" itemprop="datePublished">二月 15, 2020</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/React-js学习/">React.js学习</a>, <a class="article-category-link" href="/categories/简书项目/">简书项目</a>
 
      
	<span id="busuanzi_container_page_pv">
	  本文总阅读量<span id="busuanzi_value_page_pv"></span>次
	</span>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="UI组件和容器组件"><a href="#UI组件和容器组件" class="headerlink" title="UI组件和容器组件"></a>UI组件和容器组件</h1><ul>
<li>我们<strong>让 UI组件 负责页面的渲染，让 容器组件 负责页面的逻辑</strong></li>
<li>当然有时候让 UI组件 负责一点点逻辑也是可以的。</li>
<li>当 UI组件 <strong>只负责页面渲染时</strong>，它实际只有一个<code>render</code>函数，那么此时我们可以使用<strong>无状态组件</strong>代替它以提高性能。</li>
</ul>
<h2 id="分离UI组件TodoListUI"><a href="#分离UI组件TodoListUI" class="headerlink" title="分离UI组件TodoListUI"></a>分离UI组件<code>TodoListUI</code></h2><p>在src下<strong>新建<code>TodoListUI.js</code>文件</strong>,将<strong><code>TodoList.js</code>的render函数内页面渲染相关的内容</strong>都剪切过去，<strong>放在组件TodoListUI中</strong>。将父组件<code>TodoList.js</code>中有关页面渲染的<strong>引用</strong>都剪切到子组件<code>TodoListUI.js</code>中进行引用：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">React</span>, &#123; <span class="type">Component</span> &#125; from <span class="symbol">'reac</span>t'<span class="comment">//imcr</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="type">Input</span>, <span class="type">Button</span>, <span class="type">List</span> &#125; from <span class="symbol">'ant</span>d';</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoListUI</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            &lt;div style=&#123;&#123; marginTop: <span class="string">"10px"</span>, marginLeft: <span class="string">"10px"</span> &#125;&#125;&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;<span class="type">Input</span></span><br><span class="line">                    value=&#123;<span class="keyword">this</span>.props.inputValue&#125;</span><br><span class="line">                    placeholder=<span class="string">"Todo info"</span></span><br><span class="line">                    style=&#123;&#123; width: <span class="string">"300px"</span>, marginRight: <span class="string">"10px"</span> &#125;&#125;</span><br><span class="line">                    onChange=&#123;<span class="keyword">this</span>.props.handleInputChange&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">                &lt;<span class="type">Button</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"primary"</span> onClick=&#123;<span class="keyword">this</span>.props.handleButtonClick&#125;&gt;提交&lt;/<span class="type">Button</span>&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;<span class="type">List</span></span><br><span class="line">                style=&#123;&#123; marginTop: <span class="string">"10px"</span>, width: <span class="string">"300px"</span> &#125;&#125;</span><br><span class="line">                bordered</span><br><span class="line">                dataSource=&#123;<span class="keyword">this</span>.props.list&#125;</span><br><span class="line">                renderItem=&#123;(item, index) =&gt; &lt;<span class="type">List</span>.<span class="type">Item</span> onClick=&#123;()=&gt;&#123;<span class="keyword">this</span>.props.handleItemDelete(index)&#125;&#125;&gt;&#123;item&#125;&lt;/<span class="type">List</span>.<span class="type">Item</span>&gt;&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">        &lt;/div &gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="type">TodoListUI</span>;</span><br></pre></td></tr></table></figure>

<p>在 <strong>父组件<code>TodoList.js</code> 的render函数中调用 子组件<code>TodoListUI</code></strong> ，并将子组件需要的<strong><code>state</code>相关数据和父组件方法</strong>都通过<strong>子组件属性</strong>的方式传递过去 ，页面的渲染就交给子组件：<br>构造函数中：<code>this.handleItemDelete = this.handleItemDelete.bind(this);</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;TodoListUI</span><br><span class="line">            inputValue=&#123;<span class="keyword">this</span>.state.inputValue&#125;</span><br><span class="line">            list=&#123;<span class="keyword">this</span>.state.list&#125;</span><br><span class="line">            handleInputChange=&#123;<span class="keyword">this</span>.handleInputChange&#125;</span><br><span class="line">            handleButtonClick=&#123;<span class="keyword">this</span>.handleButtonClick&#125;</span><br><span class="line">            handleItemDelete=&#123;<span class="keyword">this</span>.handleItemDelete&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="注意：子组件事件绑定函数传参"><a href="#注意：子组件事件绑定函数传参" class="headerlink" title="注意：子组件事件绑定函数传参"></a>注意：子组件事件绑定函数传参</h3><p><strong>原本父组件中有一个事件绑定函数handleItemDelete在bind（）绑定this指向的同时进行了传参，现在改为在父组件中bind（）绑定this指向，在子组件中传参：</strong></p>
<p><strong>原本的：</strong><br>在React<a href="https://huanglizhu.github.io/2020/02/13/Redux%E5%85%A5%E9%97%A8%EF%BC%882%EF%BC%89/#使用Redux完成TodoList删除功能" target="_blank" rel="noopener">这个例子</a>中使用bind绑定事件函数 handleItemDelete 的this指向时<strong>还要将参数index传入函数</strong>，那么我们可以在绑定时传入：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;List<span class="selector-class">.Item</span> onClick=&#123;this<span class="selector-class">.handleItemDelete</span><span class="selector-class">.bind</span>(this, index)&#125;&gt;&#123;item&#125;&lt;/List.Item&gt;</span><br></pre></td></tr></table></figure>

<p><strong>现在</strong>：<br>但如果<strong>事件函数和bind绑定都在父组件中，而函数的调用和传参在子组件</strong>，就可以这样传参：</p>
<ol>
<li>在<strong>父组件</strong>的构造函数中使用bind绑定<code>this.handleItemDelete=this.handleItemDelete.bind();</code></li>
<li>我们知道<strong>bind()返回的还是一个函数</strong>，所以在<strong>子组件</strong>中，我们通过<strong>箭头函数</strong>在每次调用handleItemDelete()时传入参数index：<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;List<span class="selector-class">.Item</span> onClick=&#123;()=&gt;&#123;this<span class="selector-class">.props</span><span class="selector-class">.handleItemDelete</span>(index)&#125;&#125;&gt;&#123;item&#125;&lt;/List.Item&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p><strong>注意</strong>：</p>
<ol>
<li><strong>在这里不能直接使用<code>handleItemDelete(index)</code>传参</strong>是因为<code>handleItemDelete(index)</code>直接执行了函数，而<code>onClick</code>需要<strong>绑定的事件函数是不能立即执行的</strong>，所以需要新建一个箭头函数让他不立即执行。</li>
<li><strong>箭头函数是JS表达式，在JSX中需要使用<code>{}</code></strong>，调用的父组件的函数也是JS表达式，同样中需要使用<code>{}</code>。</li>
</ol>
<hr>
<h2 id="容器组件（父组件TodoList）"><a href="#容器组件（父组件TodoList）" class="headerlink" title="容器组件（父组件TodoList）"></a>容器组件（父组件<code>TodoList</code>）</h2><p>那么分离以后的父组件<code>TodoList</code>也就成为了容器组件</p>
<hr>
<h1 id="无状态组件（性能优化）"><a href="#无状态组件（性能优化）" class="headerlink" title="无状态组件（性能优化）"></a>无状态组件（性能优化）</h1><ul>
<li>当一个组件中<strong>只有render函数</strong>时，我们可以使用 无状态组件 替换 它。</li>
<li><strong>无状态组件</strong>：使用<strong>常量<code>const</code>定义</strong>一个箭头<strong>函数</strong>，该函数<strong>接收一个参数<code>props</code>（来自父组件的变量、方法），返回原本render函数中的内容</strong>（记得输出）</li>
</ul>
<h2 id="好处"><a href="#好处" class="headerlink" title="好处"></a>好处</h2><p>相对普通组件，<strong>无状态组件性能高</strong>：<br>因为<strong>无状态组件实际上只是一个函数</strong>，而<strong>普通组件是JS的class（类）</strong>，类生成的对象里还会有一些 生命周期函数，所以<strong>普通组件既要执行生命周期函数又要执行render函数</strong>，性能就比不上 无状态组件。</p>
<h2 id="例子：TodoListUI组件"><a href="#例子：TodoListUI组件" class="headerlink" title="例子：TodoListUI组件"></a>例子：<code>TodoListUI</code>组件</h2><p>将<code>TodoListUI</code>组件替换成<code>TodoListUI</code>组件：<br><strong>使用常量<code>const</code>定义无状态组件，它是一个函数，接收一个参数<code>props</code>（来自父组件的变量、方法），返回原本render函数中的内容</strong>。（此时<strong>原本使用<code>this.props.xx</code>来调用的父组件变量/方法 改为 使用<code>props.xx</code>来调用</strong>）：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React from <span class="string">'react'</span><span class="comment">//imcr</span></span><br><span class="line"><span class="keyword">import</span> &#123; Input, Button, <span class="built_in">List</span> &#125; from <span class="string">'antd'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TodoListUI = (props) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div style=&#123;&#123; marginTop: <span class="string">"10px"</span>, marginLeft: <span class="string">"10px"</span> &#125;&#125;&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;Input</span><br><span class="line">                    value=&#123;props.inputValue&#125;</span><br><span class="line">                    placeholder=<span class="string">"Todo info"</span></span><br><span class="line">                    style=&#123;&#123; width: <span class="string">"300px"</span>, marginRight: <span class="string">"10px"</span> &#125;&#125;</span><br><span class="line">                    onChange=&#123;props.handleInputChange&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">                &lt;Button type=<span class="string">"primary"</span> onClick=&#123; props.handleButtonClick&#125;&gt;提交&lt;/Button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;<span class="built_in">List</span></span><br><span class="line">                style=&#123;&#123; marginTop: <span class="string">"10px"</span>, width: <span class="string">"300px"</span> &#125;&#125;</span><br><span class="line">                bordered</span><br><span class="line">                dataSource=&#123; props.list&#125;</span><br><span class="line">                renderItem=&#123;(item, index) =&gt; &lt;<span class="built_in">List</span>.Item onClick=&#123;() =&gt; &#123;  props.handleItemDelete(index) &#125;&#125;&gt;&#123;item&#125;&lt;/<span class="built_in">List</span>.Item&gt;&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">        &lt;/div &gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> TodoListUI;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="复习：第三方模块axios（发送AJAX）"><a href="#复习：第三方模块axios（发送AJAX）" class="headerlink" title="复习：第三方模块axios（发送AJAX）"></a>复习：第三方模块axios（发送AJAX）</h1><p>在<a href="https://huanglizhu.github.io/2020/02/06/React%E9%AB%98%E7%BA%A7%E5%86%85%E5%AE%B9%EF%BC%883%EF%BC%89/#借助axios模块" target="_blank" rel="noopener">React高级内容（3）</a>中我们提到，React并不像jquery那样封装了AJAX发送的内置功能，所以我们需要<strong>借助 第三方模块axios来使用AJAX</strong>。</p>
<hr>
<h1 id="Redux-中发送异步请求获取数据"><a href="#Redux-中发送异步请求获取数据" class="headerlink" title="Redux 中发送异步请求获取数据"></a>Redux 中发送异步请求获取数据</h1><ul>
<li>实现功能：我们希望发送一个<strong>AJAX请求</strong>来<strong>获取数据放入列表</strong>中。</li>
<li>其实在<a href="https://huanglizhu.github.io/2020/02/06/React%E9%AB%98%E7%BA%A7%E5%86%85%E5%AE%B9%EF%BC%883%EF%BC%89/#发生-AJAX请求-列表数据" target="_blank" rel="noopener">React高级内容（3）</a>中我们实现过同样的功能，唯一的不同是现在我们通过<code>redux</code>的<code>store</code>管理<code>state</code>数据，所以我们<strong>需要走<code>redux</code>的工作流程进行数据修改</strong>。</li>
</ul>
<h2 id="总流程"><a href="#总流程" class="headerlink" title="总流程"></a>总流程</h2><p>先“从接口获取到数据的流程”，然后将获取到的数据通过“redux工作流程”显示在页面上。</p>
<h3 id="从接口获取到数据的流程"><a href="#从接口获取到数据的流程" class="headerlink" title="从接口获取到数据的流程"></a>从接口获取到数据的流程</h3><ol>
<li>在组件中<strong>创建一个生命周期函数<code>componentDidMount()</code></strong>。引用 <code>axios</code> 模块，在componentDidMount函数中<strong>借助 <code>axios</code> 模块发送<code>ajax</code>请求</strong>，使用<code>axios.get(&quot;接口路径&quot;)</code>来获取某个接口路径下的数据,请求成功后执行<code>then()</code>的回调函数（接收一个参数<code>res</code>表示接收到的数据），请求失败后执行<code>catch()</code>的回调函数</li>
<li>桌面<strong>创建<code>list.json</code>文件</strong>，并在其中放入一个数组</li>
<li>使用接口地址在<strong><code>Charles</code>中模拟接口数据</strong>，使得发送请求到接口路径时调用我们桌面的<code>list.json</code>文件【<a href="https://huanglizhu.github.io/2020/02/06/React%E9%AB%98%E7%BA%A7%E5%86%85%E5%AE%B9%EF%BC%883%EF%BC%89/#Charles抓localhost的包" target="_blank" rel="noopener">使用Charles抓取localhost包需要注意更换url</a>：需要<strong>使用<code>http://localhost.charlesproxy.com:3000/</code>访问</strong>】</li>
<li><code>then()</code>的回调函数中打印出的<code>res</code>中的内容，可得到 <strong><code>res</code>中的<code>data</code>是我们需要的数组</strong>，那么我们可以<strong>在<code>ajax</code>请求成功时通过<code>then()</code>获取<code>data</code>数据</strong></li>
</ol>
<h3 id="redux工作流程"><a href="#redux工作流程" class="headerlink" title="redux工作流程"></a>redux工作流程</h3><ol>
<li>在<code>actionTypes.js</code>中创建<code>type</code>,然后在<code>actionCreator.js</code>中,<strong>创建<code>action</code>方法</strong></li>
<li>在组件<code>TodoList.js</code>中,引用该方法<strong>获取<code>action</code>，并将从接口获取到的数据<code>data</code>传入<code>action</code></strong>，并通过<code>store.dispatch(action)</code>将<code>action</code>发送给<code>store</code></li>
<li><code>store</code><strong>自动</strong>将<code>action</code>和<code>state</code>传给<code>reducer.js</code></li>
<li><strong><code>reducer.js</code></strong>根据<code>action</code>的<code>type</code>处理相关<code>action</code>后<strong>返回<code>newState</code>给<code>store</code></strong></li>
<li><code>store</code>拿到<code>newState</code>后<strong>自动</strong>将其替换掉自己原本的<code>state</code></li>
<li><strong>组件</strong>通过<code>store.subscirbe(this.handleStoreChange)</code><strong>监听到<code>store</code>的数据变化</strong>时执行回调函数<code>this.handleStoreChange</code>进行<strong>自身<code>state</code>数据的更新</strong>，<strong>页面重新渲染</strong></li>
</ol>
<hr>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p>1.在组件中<strong>创建一个生命周期函数<code>componentDidMount()</code></strong>。引用 <code>axios</code> 模块，在componentDidMount函数中<strong>借助 <code>axios</code> 模块发送<code>ajax</code>请求</strong>，使用<code>axios.get(&quot;接口路径&quot;)</code>来获取某个接口路径下的数据,请求成功后执行<code>then()</code>的回调函数（接收一个参数<code>res</code>表示接收到的数据），请求失败后执行<code>catch()</code>的回调函数:</p>
<figure class="highlight capnproto"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> 生命周期函数</span><br><span class="line">componentDidMount() &#123;</span><br><span class="line">  <span class="regexp">//</span> 借助 `<span class="javascript">axios</span>` 模块发送`<span class="javascript">ajax</span>`请求,通过`<span class="javascript"><span class="keyword">get</span>()</span>`获取接口路径下的数据</span><br><span class="line">  axios.get(<span class="string">"/list.json"</span>).<span class="keyword">then</span>(<span class="function"><span class="params">(res)</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">    alert(<span class="string">"成功"</span>);</span><br><span class="line">  &#125;).<span class="keyword">catch</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    alert(<span class="string">"失败"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.桌面<strong>创建<code>list.json</code>文件</strong>，并在其中放入一个数组：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"你好呀"</span>,<span class="string">"可以通过点击删除我"</span>,<span class="string">"今天也要加油哦"</span>]</span><br></pre></td></tr></table></figure>

<p>3.使用接口地址在<strong><code>Charles</code>中模拟接口数据</strong>，使得发送请求到接口路径时调用我们桌面的<code>list.json</code>文件【<a href="https://huanglizhu.github.io/2020/02/06/React%E9%AB%98%E7%BA%A7%E5%86%85%E5%AE%B9%EF%BC%883%EF%BC%89/#Charles抓localhost的包" target="_blank" rel="noopener">使用Charles抓取localhost包需要注意更换url</a>】，<strong>使用<code>http://localhost.charlesproxy.com:3000/</code>访问</strong>：<br><img src="http://ww1.sinaimg.cn/large/005H7IVsgy1gbwx1asqc7j30uc0b0q47.jpg" alt="获得接口地址"><br><img src="http://ww1.sinaimg.cn/large/005H7IVsgy1gbwx45dw70j30i70gx0ts.jpg" alt="`Charles`模拟接口数据"><br><img src="http://ww1.sinaimg.cn/large/005H7IVsgy1gbwx4vgy4pj31170d1dgf.jpg" alt="成功"><br><img src="http://ww1.sinaimg.cn/large/005H7IVsgy1gbwx6yy04cj30mr0f50u8.jpg" alt="获取到数据"></p>
<p>4.<code>then()</code>的回调函数中打印出的<code>res</code>中的内容，可得到 <strong><code>res</code>中的<code>data</code>是我们需要的数组</strong>，那么我们可以<strong>在<code>ajax</code>请求成功时通过<code>then()</code>获取<code>data</code>数据</strong>：<br><img src="http://ww1.sinaimg.cn/large/005H7IVsgy1gbwxc8bawnj317h05w75l.jpg" alt="`res`中的`data`是我们需要的数组"></p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> 生命周期函数</span><br><span class="line">componentDidMount() &#123;</span><br><span class="line">  <span class="regexp">//</span> 借助 `<span class="javascript">axios</span>` 模块发送`<span class="javascript">ajax</span>`请求,通过`<span class="javascript"><span class="keyword">get</span>()</span>`获取接口路径下的数据</span><br><span class="line">  axios.get(<span class="string">"/list.json"</span>).<span class="keyword">then</span>(<span class="function"><span class="params">(res)</span> =&gt;</span> &#123;</span><br><span class="line">    const data = res.data;</span><br><span class="line">  &#125;).<span class="keyword">catch</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    alert(<span class="string">"失败"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5.在<code>actionTypes.js</code>中创建<code>type</code>,然后在<code>actionCreator.js</code>中,<strong>创建<code>action</code>方法</strong>：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> const <span class="attribute">INIT_LIST_ACTION</span>=<span class="string">"init_list_action"</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> initListAction = <span class="function">(<span class="params">data</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="keyword">type</span>: INIT_LIST_ACTION,</span><br><span class="line">  data</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>6.在组件<code>TodoList.js</code>中,引用该方法<strong>获取<code>action</code>，并将从接口获取到的数据<code>data</code>传入<code>action</code></strong>，并通过<code>store.dispatch(action)</code>将<code>action</code>发送给<code>store</code>:</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> 生命周期函数</span><br><span class="line">componentDidMount() &#123;</span><br><span class="line">  <span class="regexp">//</span> 借助 `<span class="javascript">axios</span>` 模块发送`<span class="javascript">ajax</span>`请求,通过`<span class="javascript"><span class="keyword">get</span>()</span>`获取接口路径下的数据</span><br><span class="line">  axios.get(<span class="string">"/list.json"</span>).<span class="keyword">then</span>(<span class="function"><span class="params">(res)</span> =&gt;</span> &#123;</span><br><span class="line">    const data = res.data;</span><br><span class="line">    const action=initListAction(data);</span><br><span class="line">    store.dispatch(action);</span><br><span class="line">  &#125;).<span class="keyword">catch</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    alert(<span class="string">"失败"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7.<code>store</code><strong>自动</strong>将<code>action</code>和<code>state</code>传给<code>reducer.js</code><br>8.<strong><code>reducer.js</code></strong>根据<code>action</code>的<code>type</code>处理相关<code>action</code>后<strong>返回<code>newState</code>给<code>store</code></strong>:</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (action.type === INIT_LIST_ACTION) &#123;</span><br><span class="line">  const <span class="keyword">new</span><span class="type">State</span> = JSON.parse(JSON.stringify(state));</span><br><span class="line">  <span class="keyword">new</span><span class="type">State</span>.list = action.data;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span><span class="type">State</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>【reducer中list没拿到数据】</p>
<p>9.<code>store</code>拿到<code>newState</code>后<strong>自动</strong>将其替换掉自己原本的<code>state</code><br>10.<strong>组件</strong>通过<code>store.subscirbe(this.handleStoreChange)</code><strong>监听到<code>store</code>的数据变化</strong>时执行回调函数<code>this.handleStoreChange</code>进行<strong>自身<code>state</code>数据的更新</strong>，<strong>页面重新渲染</strong>:<br><img src="http://ww1.sinaimg.cn/large/005H7IVsgy1gbwydf1mb7j30h8096wem.jpg" alt="成功"></p>
<hr>
<h1 id="使用Redux-thunk中间件实现ajax数据请求"><a href="#使用Redux-thunk中间件实现ajax数据请求" class="headerlink" title="使用Redux-thunk中间件实现ajax数据请求"></a>使用Redux-thunk中间件实现ajax数据请求</h1><ul>
<li>我们之前把异步请求放在TodoList组件的生命周期函数中，当我们<strong>放在组件中的逻辑过于复杂</strong>的时候就可以<strong>使用Redux-thunk将异步请求或者其他比较复杂的逻辑移到action中进行统一管理</strong>。</li>
<li>在这里我们先使用中间件，关于“什么是中间件”放到下一篇笔记“Redux进阶（2）”进行解释。</li>
</ul>
<p><strong>流程总结</strong>：</p>
<ol>
<li><strong>安装Redux-thunk中间件</strong></li>
<li>在store文件夹下的<code>index.html</code>中<strong>创建store时，在参数2中使用Redux-thunk</strong>（使用方法参考github中的<a href="https://github.com/zalmoxisus/redux-devtools-extension#12-advanced-store-setup" target="_blank" rel="noopener">官方文档</a>）</li>
<li>原本 创建store时 作为 参数2 的 开发者工具<code>REDUX_DEVTOOLS_EXTENSION</code> 我们可以根据github中的官方文档 换个地方放置。</li>
<li>原本写在<code>TodoList.js</code>的生命周期函数中的<strong>AJAX请求放到<code>actionCreator.js</code>的一个函数<code>getTodoList</code>返回的匿名函数中</strong>，在匿名函数中进行<strong>AJAX请求</strong>，并通过<strong>调用<code>actionCreator.js</code>的函数<code>initListAction</code>返回一个action对象</strong>，该匿名函数可以接收到<code>dispatch（）</code>，可以将其产生的action对象<strong>传给store</strong>。（原本<code>actionCreator.js</code>中的函数必须返回的action是一个对象才能被<code>dispatch(action)</code>传递到store中，但<strong>通过thunk中间件，action可以是一个函数，当<code>dispatch</code>发现action是函数时就会自动执行该函数</strong>）</li>
</ol>
<hr>
<h2 id="安装Redux-thunk中间件"><a href="#安装Redux-thunk中间件" class="headerlink" title="安装Redux-thunk中间件"></a>安装Redux-thunk中间件</h2><p>在github中搜索<code>Redux-thunk</code>可以获取他的<a href="https://github.com/reduxjs/redux-thunk#installation" target="_blank" rel="noopener">安装和使用方法</a>。</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn <span class="keyword">add</span><span class="bash"> redux-thunk</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="在创建store的文件中使用Redux-thunk"><a href="#在创建store的文件中使用Redux-thunk" class="headerlink" title="在创建store的文件中使用Redux-thunk"></a>在创建store的文件中使用Redux-thunk</h2><p><strong>store文件夹下的<code>index.html</code></strong>：</p>
<ol>
<li><strong>引入<code>applyMiddleware</code></strong>,它使我们可以使用Redux-thunk中间件</li>
<li><strong>从<code>&#39;redux-thunk&#39;</code>库中引入<code>thunk</code></strong></li>
<li>在创建store的<strong><code>createStore()</code>中添加第二个参数<code>applyMiddleware(thunk)</code>来引入thunk中间件</strong>。</li>
<li>原本我们的在参数2的位置放了<code>window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()</code>，其实<strong><code>REDUX_DEVTOOLS_EXTENSION</code>也是一个中间件</strong>，现在需要将它换一个地方。<ol>
<li>参考github中的<a href="https://github.com/zalmoxisus/redux-devtools-extension#12-advanced-store-setup" target="_blank" rel="noopener">官方文档</a>:<br><img src="http://ww1.sinaimg.cn/large/005H7IVsgy1gc5knu092cj30v70a0gn4.jpg" alt="官方文档"></li>
</ol>
</li>
<li><code>compose</code>需要从<code>redux</code>中引入。</li>
</ol>
<p><strong>最终代码：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware, compose &#125; <span class="keyword">from</span> <span class="string">"redux"</span>;</span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">'redux-thunk'</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">"./reducer"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// redux-devtools-extension中间件</span></span><br><span class="line"><span class="keyword">const</span> composeEnhancers =</span><br><span class="line">  <span class="comment">//如果REDUX_DEVTOOLS_EXTENSION_COMPOSE存在就调用它，否则就调用compose函数</span></span><br><span class="line">  <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(&#123;&#125;) : compose;<span class="comment">//compose要从redux中引入</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// thunk中间件</span></span><br><span class="line"><span class="keyword">const</span> enhancer = composeEnhancers(</span><br><span class="line">  applyMiddleware(thunk),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建store,将reducers作为第一个参数传给store</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer, enhancer);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure>

<p><strong>注意：中间件是redux的，在创建store的时候使用。不是react的！</strong></p>
<hr>
<h2 id="通过action返回一个函数-进行AJAX请求"><a href="#通过action返回一个函数-进行AJAX请求" class="headerlink" title="通过action返回一个函数(进行AJAX请求)"></a>通过action返回一个函数(进行AJAX请求)</h2><p>在<code>actionCreators.js</code>中，<strong>本来action返回的是一个对象，使用了中间件Redux-thunk后，action可以返回一个函数</strong>,在<strong>这个函数中可以进行异步操作</strong>。   </p>
<p><strong>中间件Redux-thunk的作用</strong>：<br>本来<code>store.dispatch(action);</code>中<code>action</code>必须是一个 对象 ，它才能被传递给store。<br><strong>使用中间件Redux-thunk后，<code>action</code>可以是一个函数</strong>，当调用<code>store.dispatch(action);</code>时，它<strong>识别到<code>action</code>是一个函数，便会自动执行该函数</strong>。<br><strong>且<code>dispatch()</code>会被传递到函数中，在该函数中也可以使用<code>dispatch()</code>来给store传递数据</strong>，在该函数中使用<code>dispatch(action)</code>时，它<strong>识别到<code>action</code>是一个对象，便会自动传递给<code>store</code></strong>。</p>
<p><strong>中间件Redux-thunk的好处</strong>：<br>把复杂的逻辑（异步操作）放到action中<strong>有利于后期自动化测试</strong>，比起放在生命周期函数中，放在action中比较方便自动化测试。</p>
<p><strong>TodoList.js</strong>:</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 生命周期函数</span></span><br><span class="line">component<span class="constructor">DidMount()</span> &#123;</span><br><span class="line">  <span class="comment">// 将异步AJAX请求放到action中</span></span><br><span class="line">  const action = get<span class="constructor">TodoList()</span>;</span><br><span class="line">  <span class="comment">// 因为thunk中间件，action可以是一个函数</span></span><br><span class="line">  store.dispatch(action);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>actionCreator.js</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getTodoList = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span><span class="function">(<span class="params">dispatch</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">// 借助 `axios` 模块发送`ajax`请求,通过`get()`获取接口路径下的数据</span></span><br><span class="line">    axios.get(<span class="string">"/list.json"</span>).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> data = res.data.list;</span><br><span class="line">      <span class="comment">// 通过initListAction()将data转为action对象</span></span><br><span class="line">      <span class="keyword">const</span> action = initListAction(data);</span><br><span class="line">      <span class="comment">// 将action对象传给store</span></span><br><span class="line">      dispatch(action);</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      alert(<span class="string">"失败"</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/React-js学习/">React.js学习</a>, <a class="article-category-link" href="/categories/简书项目/">简书项目</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React-js/">React.js</a></li></ul>

      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>



      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/02/16/Mock.js的使用方法/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          Mock.js的使用方法
        
      </div>
    </a>
  
  
    <a href="/2020/02/15/CSS3 transform属性/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">CSS3 transform属性</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
      <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#UI组件和容器组件"><span class="nav-number">1.</span> <span class="nav-text">UI组件和容器组件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#分离UI组件TodoListUI"><span class="nav-number">1.1.</span> <span class="nav-text">分离UI组件TodoListUI</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#注意：子组件事件绑定函数传参"><span class="nav-number">1.1.1.</span> <span class="nav-text">注意：子组件事件绑定函数传参</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#容器组件（父组件TodoList）"><span class="nav-number">1.2.</span> <span class="nav-text">容器组件（父组件TodoList）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#无状态组件（性能优化）"><span class="nav-number">2.</span> <span class="nav-text">无状态组件（性能优化）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#好处"><span class="nav-number">2.1.</span> <span class="nav-text">好处</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#例子：TodoListUI组件"><span class="nav-number">2.2.</span> <span class="nav-text">例子：TodoListUI组件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#复习：第三方模块axios（发送AJAX）"><span class="nav-number">3.</span> <span class="nav-text">复习：第三方模块axios（发送AJAX）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redux-中发送异步请求获取数据"><span class="nav-number">4.</span> <span class="nav-text">Redux 中发送异步请求获取数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#总流程"><span class="nav-number">4.1.</span> <span class="nav-text">总流程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#从接口获取到数据的流程"><span class="nav-number">4.1.1.</span> <span class="nav-text">从接口获取到数据的流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#redux工作流程"><span class="nav-number">4.1.2.</span> <span class="nav-text">redux工作流程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实例"><span class="nav-number">4.2.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#使用Redux-thunk中间件实现ajax数据请求"><span class="nav-number">5.</span> <span class="nav-text">使用Redux-thunk中间件实现ajax数据请求</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装Redux-thunk中间件"><span class="nav-number">5.1.</span> <span class="nav-text">安装Redux-thunk中间件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#在创建store的文件中使用Redux-thunk"><span class="nav-number">5.2.</span> <span class="nav-text">在创建store的文件中使用Redux-thunk</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#通过action返回一个函数-进行AJAX请求"><span class="nav-number">5.3.</span> <span class="nav-text">通过action返回一个函数(进行AJAX请求)</span></a></li></ol></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/categories" class="mobile-nav-link">分类</a>
  
    <a href="/tags" class="mobile-nav-link">标签</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
    

                <div class="clearfix container">
                    <div class="site-info">
                        &copy;
                        2020
                            珠 All Rights Reserved.
                                
                                    <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次 本站总访问量
                                    <span id="busuanzi_value_site_pv"></span>次
                                    </span>
                                    
                    </div>
                    <div class="site-credit">
                        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
                    </div>
                </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/bootstrap.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
    </script>
    




  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
