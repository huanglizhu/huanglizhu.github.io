<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Mock.js的使用方法 | 珠</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="前端,程序员,软件开发,面试,CSS,JavaScript,JS,ES6,HTML,Node.js,React,Vue" />
  
  
  
  
  <meta name="description" content="Mock.js 作用：生成随机数据，拦截 Ajax 请求 （并返回数据） 当后端还没开发好某个接口时，前端可以借助 Mock.js 拦截 Ajax 请求 并返回设置好的随机数据。当后端接口开发完成后，只需要改变 Ajax 请求 的接口路径即可。 我们写AJAX请求的时候，正常写，Mock.js会自动拦截的。 官方网站">
<meta property="og:type" content="article">
<meta property="og:title" content="Mock.js的使用方法">
<meta property="og:url" content="https://huanglizhu.github.io/2020/01/19/Mock.js%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/index.html">
<meta property="og:site_name" content="珠">
<meta property="og:description" content="Mock.js 作用：生成随机数据，拦截 Ajax 请求 （并返回数据） 当后端还没开发好某个接口时，前端可以借助 Mock.js 拦截 Ajax 请求 并返回设置好的随机数据。当后端接口开发完成后，只需要改变 Ajax 请求 的接口路径即可。 我们写AJAX请求的时候，正常写，Mock.js会自动拦截的。 官方网站">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i0.wp.com/ww1.sinaimg.cn/large/005H7IVsgy1gc52i95gi8j31500ak0ui.jpg">
<meta property="og:image" content="https://i0.wp.com/ww1.sinaimg.cn/large/005H7IVsgy1gc57g8j3ymj31c30kl441.jpg">
<meta property="og:image" content="https://i0.wp.com/ww1.sinaimg.cn/large/005H7IVsgy1gc57pfn5ehj30vg03lgm0.jpg">
<meta property="og:image" content="https://i0.wp.com/ww1.sinaimg.cn/large/005H7IVsgy1gc5899swivj30hl0g1ad6.jpg">
<meta property="og:image" content="https://i0.wp.com/ww1.sinaimg.cn/large/005H7IVsgy1gc59443nztj30dn0fktar.jpg">
<meta property="og:image" content="https://i0.wp.com/ww1.sinaimg.cn/large/005H7IVsgy1gc5gnjtckij30y7072jsc.jpg">
<meta property="article:published_time" content="2020-01-19T09:04:20.000Z">
<meta property="article:modified_time" content="2024-08-08T07:32:08.318Z">
<meta property="article:author" content="黄丽珠">
<meta property="article:tag" content="React.js">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i0.wp.com/ww1.sinaimg.cn/large/005H7IVsgy1gc52i95gi8j31500ak0ui.jpg">
  
    <link rel="alternate" href="/atom.xml" title="珠" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/sx.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >
  <link rel="stylesheet" href="/css/fashion.css" >
  <link rel="stylesheet" href="/css/glyphs.css" >

<meta name="generator" content="Hexo 6.3.0"></head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  


        <header id="allheader" class="site-header" role="banner"  >
                <div class="clearfix container">
                    <div class="site-branding">

                        <h1 class="site-title">
                            
                                    <a href="/" title="珠" rel="home">
                                        珠
                                    </a>
                                    
                        </h1>

                        
                            <div class="site-description">
                                Record every bit of front-end learning.
                            </div>
                            

                                <nav id="main-navigation" class="main-navigation" role="navigation">
                                    <a class="nav-open">Menu</a>
                                    <a class="nav-close">Close</a>

                                    <div class="clearfix sf-menu">
                                        <ul id="main-nav" class="menu sf-js-enabled sf-arrows" style="touch-action: pan-y;">
                                            
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/">
                                                        主页
                                                    </a>
                                                </li>
                                                
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/archives">
                                                        归档
                                                    </a>
                                                </li>
                                                
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/categories">
                                                        分类
                                                    </a>
                                                </li>
                                                
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/tags">
                                                        标签
                                                    </a>
                                                </li>
                                                
                                                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663">
                                                    <a class="" href="/about">
                                                        关于
                                                    </a>
                                                </li>
                                                
                                        </ul>
                                    </div>
                                </nav>

                    </div>
                </div>
        </header>

  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-Mock.js的使用方法" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      Mock.js的使用方法
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2020/01/19/Mock.js%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/" class="article-date">
	  <time datetime="2020-01-19T09:04:20.000Z" itemprop="datePublished">一月 19, 2020</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/React-js%E5%AD%A6%E4%B9%A0/">React.js学习</a>, <a class="article-category-link" href="/categories/%E7%AE%80%E4%B9%A6%E9%A1%B9%E7%9B%AE/">简书项目</a>
 
      
	<span id="busuanzi_container_page_pv">
	  本文总阅读量<span id="busuanzi_value_page_pv"></span>次
	</span>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Mock-js"><a href="#Mock-js" class="headerlink" title="Mock.js"></a>Mock.js</h1><ul>
<li><strong>作用：生成随机数据，拦截 Ajax 请求 （并返回数据）</strong></li>
<li>当后端还没开发好某个接口时，前端可以借助 Mock.js 拦截 Ajax 请求 并返回设置好的随机数据。当后端接口开发完成后，只需要改变 Ajax 请求 的接口路径即可。</li>
<li>我们写AJAX请求的时候，正常写，Mock.js会自动拦截的。</li>
<li><a target="_blank" rel="noopener" href="http://mockjs.com/">官方网站</a><span id="more"></span></li>
</ul>
<p><img src="https://i0.wp.com/ww1.sinaimg.cn/large/005H7IVsgy1gc52i95gi8j31500ak0ui.jpg" alt="作用"></p>
<hr>
<h1 id="安装Mock-js"><a href="#安装Mock-js" class="headerlink" title="安装Mock.js"></a>安装Mock.js</h1><ul>
<li>可以<a target="_blank" rel="noopener" href="https://github.com/nuysoft/Mock/wiki/Getting-Started">参考官方文档</a></li>
<li>在html中可以通过<a target="_blank" rel="noopener" href="https://www.bootcdn.cn/Mock.js/">BootCDN</a><strong>复制 <code>&lt;script&gt;</code>链接</strong> ，直接进行引用。</li>
</ul>
<hr>
<h1 id="语法规范"><a href="#语法规范" class="headerlink" title="语法规范"></a>语法规范</h1><p>具体可参考<a target="_blank" rel="noopener" href="https://github.com/nuysoft/Mock/wiki/Syntax-Specification">官方文档</a>，我只记录使用到的部分。</p>
<h2 id="数据模板定义规范"><a href="#数据模板定义规范" class="headerlink" title="数据模板定义规范"></a>数据模板定义规范</h2><p>数据模板中的<strong>每个属性</strong>由 <strong>3 部分</strong>构成：<strong>属性名、生成规则、属性值</strong>：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 属性名   name</span></span><br><span class="line"><span class="comment">// 生成规则 rule</span></span><br><span class="line"><span class="comment">// 属性值   value</span></span><br><span class="line">&#x27;name|rule&#x27;<span class="punctuation">:</span> value</span><br></pre></td></tr></table></figure>

<ul>
<li>属性名 和 生成规则 之间用竖线 <code>|</code> 分隔。</li>
<li>生成规则 是<strong>可选</strong>的。</li>
<li><strong>生成规则 有 7 种格式</strong>：<ul>
<li><code>&#39;name|min-max&#39;: value</code></li>
<li><code>&#39;name|count&#39;: value</code></li>
<li><code>&#39;name|min-max.dmin-dmax&#39;: value</code></li>
<li><code>&#39;name|min-max.dcount&#39;: value</code></li>
<li><code>&#39;name|count.dmin-dmax&#39;: value</code></li>
<li><code>&#39;name|count.dcount&#39;: value</code></li>
<li><code>&#39;name|+step&#39;: value</code></li>
</ul>
</li>
<li><strong>生成规则 的 含义</strong> 需要<strong>依赖 属性值的类型 才能确定</strong>。(具体的含义可以回到<a target="_blank" rel="noopener" href="https://github.com/nuysoft/Mock/wiki/Syntax-Specification">官方文档</a>中进行查看)</li>
<li><strong>属性值 中可以含有 <code>@</code>占位符</strong>。</li>
<li>属性值 还指定了最终值的初始值和类型。</li>
</ul>
<hr>
<h2 id="数据占位符定义规范"><a href="#数据占位符定义规范" class="headerlink" title="数据占位符定义规范"></a>数据占位符定义规范</h2><p>占位符 只是在<strong>属性值字符串</strong>中<strong>占个位置</strong>，并<strong>不出现在最终的属性值中</strong>。</p>
<p>占位符 的<strong>格式</strong>为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@占位符</span></span><br><span class="line"><span class="meta">@占位符(<span class="params">参数 [, 参数]</span>)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>用 <code>@</code> 来标识<strong>其后的字符串</strong>是 占位符。</li>
<li>占位符 <strong>引用的是 <code>Mock.Random</code> 中的方法</strong>。</li>
<li>通过 <code>Mock.Random.extend()</code> 来扩展自定义占位符。</li>
<li>占位符 也可以引用 数据模板 中的属性。</li>
<li>占位符 会<strong>优先引用</strong> 数据模板 中的属性。</li>
<li>占位符 支持 相对路径 和 绝对路径。</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Mock.<span class="title function_ invoke__">mock</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: &#123;</span><br><span class="line">        <span class="attr">first</span>: <span class="string">&#x27;@FIRST&#x27;</span>,</span><br><span class="line">        <span class="attr">middle</span>: <span class="string">&#x27;@FIRST&#x27;</span>,</span><br><span class="line">        <span class="attr">last</span>: <span class="string">&#x27;@LAST&#x27;</span>,</span><br><span class="line">        <span class="attr">full</span>: <span class="string">&#x27;@first @middle @last&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// =&gt;</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;first&quot;</span>: <span class="string">&quot;Charles&quot;</span>,</span><br><span class="line">        <span class="string">&quot;middle&quot;</span>: <span class="string">&quot;Brenda&quot;</span>,</span><br><span class="line">        <span class="string">&quot;last&quot;</span>: <span class="string">&quot;Lopez&quot;</span>,</span><br><span class="line">        <span class="string">&quot;full&quot;</span>: <span class="string">&quot;Charles Brenda Lopez&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Mock-Random"><a href="#Mock-Random" class="headerlink" title="Mock.Random"></a>Mock.Random</h1><ul>
<li>具体可参考<a target="_blank" rel="noopener" href="https://github.com/nuysoft/Mock/wiki/Mock.Random">官方文档</a></li>
<li><strong>Mock.Random</strong> 是一个工具类，用于<strong>生成各种随机数据</strong>。</li>
<li><strong>Mock.Random 的方法</strong>在数据模板中称为**『占位符』，书写格式为 <code>@占位符(参数 [, 参数])</code>**。</li>
<li><strong>注意：Mock.Random的方法 直接使用表示的是 JS变量 ，想要将其放入 属性值 中表示一个字符串则需要加上占位符</strong></li>
</ul>
<h2 id="Mock-Random的方法（占位符）"><a href="#Mock-Random的方法（占位符）" class="headerlink" title="Mock.Random的方法（占位符）"></a>Mock.Random的方法（占位符）</h2><ul>
<li>各个<strong>方法（占位符）的具体含义</strong>可参考<a target="_blank" rel="noopener" href="https://github.com/nuysoft/Mock/wiki/Mock.Random">官方文档</a></li>
<li><strong>注意：</strong> <strong>Mock.Random的方法</strong>表示的是一个<strong>JS变量</strong>，想要将其放在属性值中则需要加上**占位符<code>@</code>**将其转换为字符串。（例子在下面）</li>
</ul>
<table>
<thead>
<tr>
<th>Type</th>
<th>Method</th>
</tr>
</thead>
<tbody><tr>
<td>Basic</td>
<td>boolean, natural, integer, float, character, string, range, date, time, datetime, now</td>
</tr>
<tr>
<td>Image</td>
<td>image, dataImage</td>
</tr>
<tr>
<td>Color</td>
<td>color</td>
</tr>
<tr>
<td>Text</td>
<td>paragraph, sentence, word, title, cparagraph, csentence, cword, ctitle</td>
</tr>
<tr>
<td>Name</td>
<td>first, last, name, cfirst, clast, cname</td>
</tr>
<tr>
<td>Web</td>
<td>url, domain, email, ip, tld</td>
</tr>
<tr>
<td>Address</td>
<td>area, region</td>
</tr>
<tr>
<td>Helper</td>
<td>capitalize, upper, lower, pick, shuffle</td>
</tr>
<tr>
<td>Miscellaneous</td>
<td>guid, id</td>
</tr>
</tbody></table>
<h2 id="方法表示JS变量，加占位符表字符串"><a href="#方法表示JS变量，加占位符表字符串" class="headerlink" title="方法表示JS变量，加占位符表字符串"></a>方法表示JS变量，加占位符表字符串</h2><p><code>Random.cname()</code>随机生成一个常见的中文姓名：</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Random.cname()</span><br><span class="line">// <span class="operator">=</span>&gt; <span class="string">&quot;袁军&quot;</span></span><br></pre></td></tr></table></figure>
<p>但是**<code>Mock.Random.cname()</code><strong>表示的是一个</strong>JS变量<strong>，如果你想要用到</strong>属性值<strong>中，则</strong>需要加上一个占位符<code>@</code>使其表示一个字符串**（<code>@cname</code>）。</p>
<hr>
<h1 id="Mock-mock"><a href="#Mock-mock" class="headerlink" title="Mock.mock()"></a>Mock.mock()</h1><ul>
<li><code>Mock.mock( template )</code>:<strong>根据 数据模板template 生成 模拟数据</strong>。</li>
<li><code>Mock.mock( rurl, template )</code>:记录数据模板。<strong>当拦截到匹配 rurl 的 Ajax 请求时，将根据数据模板 template 生成模拟数据，并作为响应数据返回</strong>。<ul>
<li><strong>rurl</strong>(可选)表示<strong>需要拦截的 URL</strong>，可以是 <strong>URL 字符串或 URL 正则</strong>。例如 <code>/\/domain\/list\.json/</code>、<code>&#39;/domian/list.json&#39;</code>。</li>
<li><strong>template</strong>(可选)表示数据模板，可以是<strong>对象或字符串</strong>。例如 <code>&#123; &#39;data|1-10&#39;:[&#123;&#125;] &#125;</code>、<code>&#39;@EMAIL&#39;</code>。</li>
</ul>
</li>
<li>更多使用方法可参考<a target="_blank" rel="noopener" href="https://github.com/nuysoft/Mock/wiki/Mock.mock()">官方文档</a></li>
</ul>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><h3 id="通过BootCDN引入mock-js"><a href="#通过BootCDN引入mock-js" class="headerlink" title="通过BootCDN引入mock.js"></a>通过BootCDN引入mock.js</h3><p><a target="_blank" rel="noopener" href="https://www.bootcdn.cn/">BootCDN</a>:<br><img src="https://i0.wp.com/ww1.sinaimg.cn/large/005H7IVsgy1gc57g8j3ymj31c30kl441.jpg" alt="引入mock.js"></p>
<h3 id="生成一个随机对象"><a href="#生成一个随机对象" class="headerlink" title="生成一个随机对象"></a>生成一个随机对象</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/Mock.js/1.0.1-beta3/mock-min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> data = <span class="title class_">Mock</span>.<span class="title function_">mock</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="string">&quot;id&quot;</span>: <span class="string">&quot;@id&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;@cname&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="string">&quot;age&quot;</span>: <span class="string">&quot;@integer(20,30)&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以看到刷新页面之后得到的数据是不同的：<br><img src="https://i0.wp.com/ww1.sinaimg.cn/large/005H7IVsgy1gc57pfn5ehj30vg03lgm0.jpg" alt="可以看到刷新页面之后得到的数据是不同的"></p>
<h3 id="生成一个随机对象组成的数组"><a href="#生成一个随机对象组成的数组" class="headerlink" title="生成一个随机对象组成的数组"></a>生成一个随机对象组成的数组</h3><p>但是只得到一个随机对象还不够方便，我们可以借助**<a target="_blank" rel="noopener" href="https://github.com/nuysoft/Mock/wiki/Syntax-Specification">数据模板定义规范</a>中“属性值是数组 Array”时的 规则**(<code>&#39;name|count&#39;: array</code>:通过重复属性值 array 生成一个新数组，重复次数为 count)来构成一个<strong>随机对象组成的数组</strong>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/Mock.js/1.0.1-beta3/mock-min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> data = <span class="title class_">Mock</span>.<span class="title function_">mock</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="string">&quot;userList|20&quot;</span>: [</span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&quot;id&quot;</span>: <span class="string">&quot;@id&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;@cname&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&quot;age&quot;</span>: <span class="string">&quot;@integer(20,30)&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      ]</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以看到刷新页面之后得到的数据是<strong>20个随机对象组成的数组</strong>的：<br><img src="https://i0.wp.com/ww1.sinaimg.cn/large/005H7IVsgy1gc5899swivj30hl0g1ad6.jpg" alt="20个随机对象组成的数组"></p>
<p><strong><code>@id</code>是随机生成的18位身份证号码</strong>，我们可以<strong>让属性id从1开始递增</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;id|+1&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<p><img src="https://i0.wp.com/ww1.sinaimg.cn/large/005H7IVsgy1gc59443nztj30dn0fktar.jpg" alt="id是从1开始递增的"></p>
<h3 id="拦截AJAX请求，返回mock数据"><a href="#拦截AJAX请求，返回mock数据" class="headerlink" title="拦截AJAX请求，返回mock数据"></a>拦截AJAX请求，返回mock数据</h3><p>在这之前我们已经明白如何生成mock数据了，那么我们接下来<br>我们可以<strong>使用jquery来发送一个AJAX请求</strong>，首先到BootCDN中引入jquery。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/Mock.js/1.0.1-beta3/mock-min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//如果拦截到&quot;/userList&quot;的请求，就返回对应的mock数据</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Mock</span>.<span class="title function_">mock</span>(<span class="string">&quot;/userList&quot;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="string">&quot;userList|20&quot;</span>: [</span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&quot;id|+1&quot;</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;@cname&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&quot;age&quot;</span>: <span class="string">&quot;@integer(20,30)&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      ]</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//发送AJAX请求，获取&quot;/userList&quot;下的数据</span></span></span><br><span class="line"><span class="language-javascript">    $.<span class="title function_">get</span>(<span class="string">&quot;/userList&quot;</span>, <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//直接拿到的data是字符串，我们需要将其转换为JS对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(data));</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>直接拿到的mock数据是字符串</strong>，为了方便后续操作，<strong>需要通过<code>JSON.parse()</code>将其转换为 JS对象</strong>。<br><strong>原因：</strong><br>上面这个例子，如果我们想循环这个数组，得到数组中的某一项放在页面上，此时我们就需要对数组进行操作，如果我们拿到的数据是 字符串 ，那就很麻烦了。</p>
<hr>
<h1 id="项目中实际运用"><a href="#项目中实际运用" class="headerlink" title="项目中实际运用"></a>项目中实际运用</h1><p>在项目中<strong>新建一个mock文件夹</strong>，在该文件夹下放<strong>专属的js文件</strong>用于 规定<strong>拦截到某个AJAX请求时传回相应的模拟数据</strong>。<br>在<strong>需要用到这个接口下的数据的文件中，引入mock.js（通过BootCDN查找引入链接），再引入这个mock文件夹下的js文件</strong>，即可<strong>发出AJAX请求</strong>。</p>
<hr>
<h2 id="在react中使用mock-js"><a href="#在react中使用mock-js" class="headerlink" title="在react中使用mock.js"></a>在react中使用mock.js</h2><p><strong>注意：</strong>但<strong>在react中</strong>，我们<strong>通过axios发起 AJAX请求 拿到的数据直接就是对象</strong>，不需要进行转换：<br><img src="https://i0.wp.com/ww1.sinaimg.cn/large/005H7IVsgy1gc5gnjtckij30y7072jsc.jpg" alt="使用axios时打印的res"></p>
<p><strong>使用流程：</strong></p>
<ol>
<li>在项目中<strong>安装mock.js</strong>：<code>yarn add mockjs</code></li>
<li>在 src目录 下<strong>创建 mock文件夹</strong> 用于存放我们的 定义mock数据 的js文件，在<code>TodoListMock.js</code>中引入<code>mockjs</code>并写入我们的模拟数据。<ol>
<li><code>import Mock from &quot;mockjs&quot;</code>&#x2F;&#x2F;引入Mock</li>
<li><code>export default</code>&#x2F;&#x2F;记得输出mock组件</li>
</ol>
</li>
<li>在需要发出 AJAX请求 的文件中<strong>引入我们写好的mock组件</strong>，那么接下来只要<strong>正常书写AJAX请求（通过axios）</strong>即可，一旦对应的请求发出，Mock就会拦截并返回数据。<ol>
<li><code>import &quot;./mock/TodoListMock&quot;;</code>&#x2F;&#x2F;引入自定义的mock组件</li>
<li>正常发出 AJAX请求</li>
</ol>
</li>
</ol>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/React-js%E5%AD%A6%E4%B9%A0/">React.js学习</a>, <a class="article-category-link" href="/categories/%E7%AE%80%E4%B9%A6%E9%A1%B9%E7%9B%AE/">简书项目</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React-js/" rel="tag">React.js</a></li></ul>

      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>



      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/01/20/JSON%E5%9F%BA%E7%A1%80/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          JSON基础
        
      </div>
    </a>
  
  
    <a href="/2020/01/18/%E5%BC%80%E5%8F%91%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%E4%B9%8B%E6%8E%A5%E5%8F%A3(2)/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">开发博客项目之接口(2)</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
      <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Mock-js"><span class="nav-number">1.</span> <span class="nav-text">Mock.js</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85Mock-js"><span class="nav-number">2.</span> <span class="nav-text">安装Mock.js</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83"><span class="nav-number">3.</span> <span class="nav-text">语法规范</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E6%9D%BF%E5%AE%9A%E4%B9%89%E8%A7%84%E8%8C%83"><span class="nav-number">3.1.</span> <span class="nav-text">数据模板定义规范</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%8D%A0%E4%BD%8D%E7%AC%A6%E5%AE%9A%E4%B9%89%E8%A7%84%E8%8C%83"><span class="nav-number">3.2.</span> <span class="nav-text">数据占位符定义规范</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Mock-Random"><span class="nav-number">4.</span> <span class="nav-text">Mock.Random</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Mock-Random%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%88%E5%8D%A0%E4%BD%8D%E7%AC%A6%EF%BC%89"><span class="nav-number">4.1.</span> <span class="nav-text">Mock.Random的方法（占位符）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E8%A1%A8%E7%A4%BAJS%E5%8F%98%E9%87%8F%EF%BC%8C%E5%8A%A0%E5%8D%A0%E4%BD%8D%E7%AC%A6%E8%A1%A8%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">4.2.</span> <span class="nav-text">方法表示JS变量，加占位符表字符串</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Mock-mock"><span class="nav-number">5.</span> <span class="nav-text">Mock.mock()</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BE%8B%E5%AD%90"><span class="nav-number">5.1.</span> <span class="nav-text">例子</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87BootCDN%E5%BC%95%E5%85%A5mock-js"><span class="nav-number">5.1.1.</span> <span class="nav-text">通过BootCDN引入mock.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E9%9A%8F%E6%9C%BA%E5%AF%B9%E8%B1%A1"><span class="nav-number">5.1.2.</span> <span class="nav-text">生成一个随机对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E9%9A%8F%E6%9C%BA%E5%AF%B9%E8%B1%A1%E7%BB%84%E6%88%90%E7%9A%84%E6%95%B0%E7%BB%84"><span class="nav-number">5.1.3.</span> <span class="nav-text">生成一个随机对象组成的数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%A6%E6%88%AAAJAX%E8%AF%B7%E6%B1%82%EF%BC%8C%E8%BF%94%E5%9B%9Emock%E6%95%B0%E6%8D%AE"><span class="nav-number">5.1.4.</span> <span class="nav-text">拦截AJAX请求，返回mock数据</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%AE%9E%E9%99%85%E8%BF%90%E7%94%A8"><span class="nav-number">6.</span> <span class="nav-text">项目中实际运用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8react%E4%B8%AD%E4%BD%BF%E7%94%A8mock-js"><span class="nav-number">6.1.</span> <span class="nav-text">在react中使用mock.js</span></a></li></ol></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/categories" class="mobile-nav-link">分类</a>
  
    <a href="/tags" class="mobile-nav-link">标签</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
    

                <div class="clearfix container">
                    <div class="site-info">
                        &copy;
                        2024
                            珠 All Rights Reserved.
                                
                                    <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次 本站总访问量
                                    <span id="busuanzi_value_site_pv"></span>次
                                    </span>
                                    
                    </div>
                    <div class="site-credit">
                        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
                    </div>
                </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<script src="/js/bootstrap.js"></script>


<script src="/js/main.js"></script>








  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
    </script>
    




  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
